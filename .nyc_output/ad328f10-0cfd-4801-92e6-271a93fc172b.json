{"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\blogs\\tests\\blog.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\blogs\\tests\\blog.spec.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"25":{"start":{"line":26,"column":4},"end":{"line":26,"column":62}},"26":{"start":{"line":28,"column":0},"end":{"line":28,"column":62}},"27":{"start":{"line":29,"column":14},"end":{"line":29,"column":54}},"28":{"start":{"line":31,"column":20},"end":{"line":31,"column":57}},"29":{"start":{"line":32,"column":15},"end":{"line":32,"column":44}},"30":{"start":{"line":33,"column":15},"end":{"line":33,"column":47}},"31":{"start":{"line":34,"column":13},"end":{"line":34,"column":43}},"32":{"start":{"line":36,"column":18},"end":{"line":36,"column":90}},"33":{"start":{"line":37,"column":20},"end":{"line":37,"column":56}},"34":{"start":{"line":38,"column":0},"end":{"line":38,"column":40}},"35":{"start":{"line":39,"column":15},"end":{"line":39,"column":58}},"36":{"start":{"line":39,"column":21},"end":{"line":39,"column":58}},"37":{"start":{"line":41,"column":4},"end":{"line":70,"column":7}},"38":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"39":{"start":{"line":50,"column":12},"end":{"line":50,"column":35}},"40":{"start":{"line":52,"column":8},"end":{"line":52,"column":36}},"41":{"start":{"line":53,"column":8},"end":{"line":53,"column":36}},"42":{"start":{"line":54,"column":8},"end":{"line":54,"column":38}},"43":{"start":{"line":55,"column":8},"end":{"line":55,"column":30}},"44":{"start":{"line":72,"column":0},"end":{"line":155,"column":3}},"45":{"start":{"line":73,"column":24},"end":{"line":73,"column":26}},"46":{"start":{"line":74,"column":22},"end":{"line":74,"column":24}},"47":{"start":{"line":75,"column":19},"end":{"line":75,"column":45}},"48":{"start":{"line":76,"column":4},"end":{"line":84,"column":7}},"49":{"start":{"line":77,"column":8},"end":{"line":83,"column":11}},"50":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"51":{"start":{"line":79,"column":16},"end":{"line":79,"column":35}},"52":{"start":{"line":81,"column":12},"end":{"line":81,"column":35}},"53":{"start":{"line":82,"column":12},"end":{"line":82,"column":19}},"54":{"start":{"line":85,"column":4},"end":{"line":92,"column":7}},"55":{"start":{"line":86,"column":8},"end":{"line":91,"column":11}},"56":{"start":{"line":90,"column":12},"end":{"line":90,"column":19}},"57":{"start":{"line":93,"column":4},"end":{"line":107,"column":7}},"58":{"start":{"line":94,"column":8},"end":{"line":106,"column":11}},"59":{"start":{"line":104,"column":12},"end":{"line":104,"column":96}},"60":{"start":{"line":105,"column":12},"end":{"line":105,"column":24}},"61":{"start":{"line":108,"column":4},"end":{"line":132,"column":7}},"62":{"start":{"line":109,"column":8},"end":{"line":131,"column":11}},"63":{"start":{"line":124,"column":12},"end":{"line":124,"column":64}},"64":{"start":{"line":125,"column":12},"end":{"line":125,"column":75}},"65":{"start":{"line":126,"column":12},"end":{"line":126,"column":74}},"66":{"start":{"line":128,"column":12},"end":{"line":128,"column":38}},"67":{"start":{"line":129,"column":12},"end":{"line":129,"column":40}},"68":{"start":{"line":130,"column":12},"end":{"line":130,"column":24}},"69":{"start":{"line":133,"column":4},"end":{"line":143,"column":7}},"70":{"start":{"line":134,"column":8},"end":{"line":142,"column":11}},"71":{"start":{"line":137,"column":12},"end":{"line":137,"column":64}},"72":{"start":{"line":138,"column":12},"end":{"line":138,"column":75}},"73":{"start":{"line":139,"column":12},"end":{"line":139,"column":74}},"74":{"start":{"line":140,"column":12},"end":{"line":140,"column":69}},"75":{"start":{"line":141,"column":12},"end":{"line":141,"column":24}},"76":{"start":{"line":144,"column":4},"end":{"line":154,"column":7}},"77":{"start":{"line":145,"column":8},"end":{"line":153,"column":11}},"78":{"start":{"line":149,"column":12},"end":{"line":149,"column":64}},"79":{"start":{"line":150,"column":12},"end":{"line":150,"column":75}},"80":{"start":{"line":151,"column":12},"end":{"line":151,"column":74}},"81":{"start":{"line":152,"column":12},"end":{"line":152,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":56},"end":{"line":25,"column":57}},"loc":{"start":{"line":25,"column":71},"end":{"line":27,"column":1}},"line":25},"7":{"name":"(anonymous_7)","decl":{"start":{"line":39,"column":15},"end":{"line":39,"column":16}},"loc":{"start":{"line":39,"column":21},"end":{"line":39,"column":58}},"line":39},"8":{"name":"registerAndLoginUser","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":29}},"loc":{"start":{"line":40,"column":40},"end":{"line":71,"column":1}},"line":40},"9":{"name":"(anonymous_9)","decl":{"start":{"line":48,"column":13},"end":{"line":48,"column":14}},"loc":{"start":{"line":48,"column":34},"end":{"line":70,"column":5}},"line":48},"10":{"name":"(anonymous_10)","decl":{"start":{"line":72,"column":28},"end":{"line":72,"column":29}},"loc":{"start":{"line":72,"column":34},"end":{"line":155,"column":1}},"line":72},"11":{"name":"(anonymous_11)","decl":{"start":{"line":76,"column":11},"end":{"line":76,"column":12}},"loc":{"start":{"line":76,"column":27},"end":{"line":84,"column":5}},"line":76},"12":{"name":"(anonymous_12)","decl":{"start":{"line":77,"column":29},"end":{"line":77,"column":30}},"loc":{"start":{"line":77,"column":56},"end":{"line":83,"column":9}},"line":77},"13":{"name":"(anonymous_13)","decl":{"start":{"line":85,"column":10},"end":{"line":85,"column":11}},"loc":{"start":{"line":85,"column":26},"end":{"line":92,"column":5}},"line":85},"14":{"name":"(anonymous_14)","decl":{"start":{"line":89,"column":17},"end":{"line":89,"column":18}},"loc":{"start":{"line":89,"column":38},"end":{"line":91,"column":9}},"line":89},"15":{"name":"(anonymous_15)","decl":{"start":{"line":93,"column":61},"end":{"line":93,"column":62}},"loc":{"start":{"line":93,"column":71},"end":{"line":107,"column":5}},"line":93},"16":{"name":"(anonymous_16)","decl":{"start":{"line":103,"column":17},"end":{"line":103,"column":18}},"loc":{"start":{"line":103,"column":38},"end":{"line":106,"column":9}},"line":103},"17":{"name":"(anonymous_17)","decl":{"start":{"line":108,"column":41},"end":{"line":108,"column":42}},"loc":{"start":{"line":108,"column":51},"end":{"line":132,"column":5}},"line":108},"18":{"name":"(anonymous_18)","decl":{"start":{"line":123,"column":17},"end":{"line":123,"column":18}},"loc":{"start":{"line":123,"column":38},"end":{"line":131,"column":9}},"line":123},"19":{"name":"(anonymous_19)","decl":{"start":{"line":133,"column":42},"end":{"line":133,"column":43}},"loc":{"start":{"line":133,"column":52},"end":{"line":143,"column":5}},"line":133},"20":{"name":"(anonymous_20)","decl":{"start":{"line":136,"column":17},"end":{"line":136,"column":18}},"loc":{"start":{"line":136,"column":38},"end":{"line":142,"column":9}},"line":136},"21":{"name":"(anonymous_21)","decl":{"start":{"line":144,"column":48},"end":{"line":144,"column":49}},"loc":{"start":{"line":144,"column":58},"end":{"line":154,"column":5}},"line":144},"22":{"name":"(anonymous_22)","decl":{"start":{"line":148,"column":17},"end":{"line":148,"column":18}},"loc":{"start":{"line":148,"column":38},"end":{"line":153,"column":9}},"line":148}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":25,"column":51}},{"start":{"line":25,"column":56},"end":{"line":27,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":61}},"type":"cond-expr","locations":[{"start":{"line":26,"column":37},"end":{"line":26,"column":40}},{"start":{"line":26,"column":43},"end":{"line":26,"column":61}}],"line":26},"18":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":33}},"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":15}},{"start":{"line":26,"column":19},"end":{"line":26,"column":33}}],"line":26},"19":{"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},{"start":{"line":49,"column":8},"end":{"line":51,"column":9}}],"line":49},"20":{"loc":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},{"start":{"line":78,"column":12},"end":{"line":80,"column":13}}],"line":78}},"s":{"0":1,"1":10,"2":10,"3":10,"4":10,"5":10,"6":9,"7":10,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":10,"21":10,"22":1,"23":1,"24":1,"25":4,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":6,"37":1,"38":1,"39":0,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":0,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":0,"61":1,"62":1,"63":1,"64":1,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":0,"81":0},"f":{"0":10,"1":9,"2":0,"3":1,"4":0,"5":1,"6":4,"7":6,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1},"b":{"0":[1,1,1],"1":[1,0],"2":[10,0],"3":[10,0],"4":[10,10],"5":[0,10],"6":[10,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,1],"12":[1,1],"13":[1,0],"14":[10,0],"15":[10,10],"16":[1,1,1],"17":[1,3],"18":[4,4],"19":[0,1],"20":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/blogs/tests/blog.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/blogs/tests/blog.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import app from \"../../../app\";\r\n// import { testImg } from \"../../../constants\";\r\nimport chaiHttp from \"chai-http\";\r\nimport chai, { expect } from \"chai\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\n\r\nlet token, id, slug;\r\nconst imagePath = path.join(\r\n  __dirname,\r\n  \"../../../../img/user-1714366525835.png\"\r\n);\r\nconst imageBuffer = fs.readFileSync(imagePath);\r\n\r\nchai.use(chaiHttp);\r\nconst router = () => chai.request(app);\r\nfunction registerAndLoginUser(callback: Function) {\r\n  router()\r\n    .post(\"/api/signup\")\r\n    .send({\r\n      fullname: \"TestUser\",\r\n      email: \"datchguest@gmail.com\",\r\n      password: \"PasswordForUser@123\",\r\n    })\r\n    .end((error, response) => {\r\n      if (error) {\r\n        return callback(error);\r\n      }\r\n\r\n      token = response.body.token;\r\n      id = response.body.data._id;\r\n      console.log(\"Found id: \", id);\r\n\r\n      callback(null, token);\r\n\r\n      // router()\r\n      //   .post(\"/api/login\")\r\n      //   .send({\r\n      //     email: \"datchguest@gmail.com\",\r\n      //     password: \"PasswordForUser@123\",\r\n      //   })\r\n      //   .end((error, response) => {\r\n      //     if (error) {\r\n      //       return callback(error);\r\n      //     }\r\n\r\n      //     token = response.body.token;\r\n      //     id = response.body.data._id;\r\n\r\n      //     callback(null, token);\r\n      //   });\r\n    });\r\n}\r\n\r\ndescribe(\"Blog Test Cases\", () => {\r\n  let createdBlogId = \"\";\r\n\r\n  let createdTodo = {};\r\n  const fakeId = \"609d2071278a0914dca23b99\";\r\n\r\n  before(function (done) {\r\n    registerAndLoginUser((error: any, retrievedToken: string) => {\r\n      if (error) {\r\n        return done(error);\r\n      }\r\n      token = retrievedToken;\r\n      done();\r\n    });\r\n  });\r\n\r\n  after(function (done) {\r\n    router()\r\n      .delete(`/api/users/${id}`)\r\n      .set(\"Authorization\", `Bearer ${token}`)\r\n      .end((error, response) => {\r\n        done();\r\n      });\r\n  });\r\n\r\n  it(\"Should not be able to add blog without login token\", (done) => {\r\n    router()\r\n      .post(\"/api/blogs/\")\r\n      .set(\"Authorization\", \"Bearer idiuddvjnfjvnjvnvjnfvfvn\")\r\n      .send({\r\n        title: \"Blog Title\",\r\n        description: \"Blog description\",\r\n        longDescription:\r\n          \"htiwfutr djhgtrj gtrjgntr gtgunrtjgntrjntr gtjgntrugjntr\",\r\n        image:\r\n          \"https://media.istockphoto.com/id/537331500/photo/programming-code-abstract-technology-background-of-software-deve.jpg?s=612x612&w=0&k=20&c=jlYes8ZfnCmD0lLn-vKvzQoKXrWaEcVypHnB5MuO-g8=\",\r\n      })\r\n      .end((error, response) => {\r\n        expect(response.body).to.be.an(\"object\").that.has.property(\"ok\", false);\r\n        done(error);\r\n      });\r\n  });\r\n\r\n  it(\"Should be able to add new Blog\", (done) => {\r\n    router()\r\n      .post(\"/api/blogs/post\")\r\n      .field(\"title\", \"Why coding sucks\")\r\n      .field(\"description\", \"i hate testing\")\r\n      .field(\"longDescription\", \"jrfejrgntjgnjtrgnutgn\")\r\n      .attach(\"image\", imageBuffer, \"user-1714366525835.png\")\r\n      .set(\"Authorization\", `Bearer ${token}`)\r\n      // .send({\r\n      //   title: \"Blog Title\",\r\n      //   description: \"Blog description\",\r\n      //   longDescription:\r\n      //     \"htiwfutr djhgtrj gtrjgntr gtgunrtjgntrjntr gtjgntrugjntr\",\r\n      //   // image: \"../../../../img/user-1714366525835.png\",\r\n      // })\r\n      .end((error, response) => {\r\n        expect(response.body).to.be.a(\"object\");\r\n        expect(response.body).to.have.property(\"ok\", true);\r\n        expect(response.body).to.have.property(\"message\");\r\n        // createdBlogId = response.body.data._id;\r\n        slug = response.body.slug;\r\n        console.log(\"slug: \", slug);\r\n        done(error);\r\n      });\r\n  });\r\n\r\n  it(\"Should be able to get all blogs\", (done) => {\r\n    router()\r\n      .get(\"/api/blogs/\")\r\n      .end((error, response) => {\r\n        expect(response.body).to.be.a(\"object\");\r\n        expect(response.body).to.have.property(\"ok\", true);\r\n        expect(response.body).to.have.property(\"message\");\r\n        expect(response.body.data).to.be.an(\"array\");\r\n        done(error);\r\n      });\r\n  });\r\n\r\n  it(\"Should be able to delete created blog\", (done) => {\r\n    router()\r\n      .delete(`/api/blogs/${slug}`)\r\n      .set(\"Authorization\", `Bearer ${token}`)\r\n      .end((error, response) => {\r\n        expect(response.body).to.be.a(\"object\");\r\n        expect(response.body).to.have.property(\"ok\", true);\r\n        expect(response.body).to.have.property(\"message\");\r\n        done(error);\r\n      });\r\n  });\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c1fd03fc746225bd54784c12d3157baca69c8590"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\app.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":69}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":65}},"6":{"start":{"line":9,"column":24},"end":{"line":9,"column":65}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":51}},"8":{"start":{"line":11,"column":15},"end":{"line":11,"column":47}},"9":{"start":{"line":12,"column":20},"end":{"line":12,"column":66}},"10":{"start":{"line":13,"column":12},"end":{"line":13,"column":36}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":26}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":31}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":51}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":34}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":58}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":40}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":40}},"19":{"start":{"line":22,"column":0},"end":{"line":22,"column":37}},"20":{"start":{"line":24,"column":0},"end":{"line":26,"column":3}},"21":{"start":{"line":27,"column":0},"end":{"line":29,"column":3}},"22":{"start":{"line":28,"column":4},"end":{"line":28,"column":72}},"23":{"start":{"line":30,"column":0},"end":{"line":30,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":8},"end":{"line":24,"column":9}},"loc":{"start":{"line":24,"column":39},"end":{"line":26,"column":1}},"line":24},"2":{"name":"(anonymous_2)","decl":{"start":{"line":27,"column":29},"end":{"line":27,"column":30}},"loc":{"start":{"line":27,"column":35},"end":{"line":29,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":7,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1},"f":{"0":7,"1":0,"2":1},"b":{"0":[1,1,1],"1":[1,6],"2":[7,7]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/app.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAAmE;AACnE,sEAA6C;AAC7C,kEAAyC;AACzC,kEAAkC;AAClC,oDAA4B;AAC5B,gDAAwB;AACxB,mEAA2C;AAC3C,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AAEtB,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,sCAAoC;AAEpC,GAAG,CAAC,GAAG,CAAC,IAAA,cAAI,GAAE,CAAC,CAAC;AAChB,GAAG,CAAC,GAAG,CAAC,IAAA,yBAAc,EAAC,SAAS,CAAC,CAAC,CAAC;AACnC,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAChD,GAAG,CAAC,GAAG,CAAC,IAAA,uBAAY,GAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,IAAA,uBAAK,GAAE,CAAC,CAAC;AAEjB,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,mBAAS,CAAC,CAAC;AAE3B,oCAAoC;AACpC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAQ,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB;IACzE,+BAA+B;AACjC,CAAC,CAAC,CAAC;AAEH,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE;IAChC,OAAO,CAAC,GAAG,CAAC,oCAAoC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACtE,CAAC,CAAC,CAAC;AAEH,kBAAe,GAAG,CAAC","sourcesContent":["import express, { NextFunction, Request, Response } from \"express\";\r\nimport methodOverride from \"method-override\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport flash from \"connect-flash\";\r\nimport dotenv from \"dotenv\";\r\nimport cors from \"cors\";\r\nimport allRoutes from \"./routes/allRoutes\";\r\nconst app = express();\r\n\r\ndotenv.config();\r\n\r\nimport \"./database/config/database\";\r\n\r\napp.use(cors());\r\napp.use(methodOverride(\"_method\"));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(cookieParser());\r\napp.use(flash());\r\n\r\napp.use(\"/api\", allRoutes);\r\n\r\n//? Global error handling middleware\r\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\r\n  // res.status(500).json({mess})\r\n});\r\n\r\napp.listen(process.env.PORT, () => {\r\n  console.log(`Server started listening on port ${process.env.PORT}`);\r\n});\r\n\r\nexport default app;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f0491c5393d0c010138a3009fdc9c819b95b7777"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\allRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\allRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":41}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":24},"end":{"line":9,"column":67}},"7":{"start":{"line":10,"column":21},"end":{"line":10,"column":61}},"8":{"start":{"line":11,"column":24},"end":{"line":11,"column":67}},"9":{"start":{"line":12,"column":26},"end":{"line":12,"column":71}},"10":{"start":{"line":13,"column":21},"end":{"line":13,"column":61}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":48}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":43}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":61}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":52}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":55}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":7,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1},"f":{"0":7},"b":{"0":[1,1,1],"1":[6,1],"2":[7,7]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/allRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/allRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,8DAAsC;AACtC,oEAA4C;AAC5C,8DAAsC;AACtC,oEAA4C;AAC5C,wEAAgD;AAChD,8DAAsC;AAEtC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,oBAAU,CAAC,CAAC;AAC5B,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,uBAAa,CAAC,CAAC;AACtC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,oBAAU,CAAC,CAAC;AACjC,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,uBAAa,CAAC,CAAC;AACnD,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,yBAAe,CAAC,CAAC;AAC1C,MAAM,CAAC,GAAG,CAAC,oBAAoB,EAAE,oBAAU,CAAC,CAAC;AAE7C,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nconst router = express.Router();\r\n\r\nimport userRoutes from \"./userRoutes\";\r\nimport contactRoutes from \"./contactRoutes\";\r\nimport blogRoutes from \"./blogRoutes\";\r\nimport commentRoutes from \"./commentRoutes\";\r\nimport subscribeRoutes from \"./subscribeRoutes\";\r\nimport likeRoutes from \"./likeRoutes\";\r\n\r\nrouter.use(\"/\", userRoutes);\r\nrouter.use(\"/contact\", contactRoutes);\r\nrouter.use(\"/blogs\", blogRoutes);\r\nrouter.use(\"/blogs/:slug/comments\", commentRoutes);\r\nrouter.use(\"/subscribe\", subscribeRoutes);\r\nrouter.use(\"/blogs/:slug/likes\", likeRoutes);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9db1769efc4a8684e1a273d3c740c88203c01e42"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\userRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\userRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":79}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":60}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":52}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":54}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":110}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":113}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/userRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/userRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAE9B,yDAAwE;AACxE,gFAMqD;AACrD,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,8BAAa,CAAC,CAAC;AAE3C,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,sBAAK,CAAC,CAAC;AACnC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,uBAAM,CAAC,CAAC;AAErC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,yBAAY,EAAE,2BAAc,EAAE,yBAAQ,CAAC,CAAC;AAEnE,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,yBAAY,EAAE,2BAAc,EAAE,2BAAU,CAAC,CAAC;AAEtE,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\n\r\nimport { authenticate, authorizeUsers } from \"../middleware/middleware\";\r\nimport {\r\n  deleteUser,\r\n  getUsers,\r\n  login,\r\n  signup,\r\n  verifyAccount,\r\n} from \"../modules/users/controllers/userController\";\r\nconst router = express.Router();\r\n\r\nrouter.route(\"/verify\").get(verifyAccount);\r\n\r\nrouter.route(\"/login\").post(login);\r\nrouter.route(\"/signup\").post(signup);\r\n\r\nrouter.route(\"/users\").get(authenticate, authorizeUsers, getUsers);\r\n\r\nrouter.delete(\"/users/:id\", authenticate, authorizeUsers, deleteUser);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a7e3f5ce2c5db106c5d0dbcc555a8a71e83187c7"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\middleware\\middleware.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\middleware\\middleware.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":130}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":63}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":78}},"18":{"start":{"line":18,"column":21},"end":{"line":18,"column":78}},"19":{"start":{"line":19,"column":24},"end":{"line":19,"column":84}},"20":{"start":{"line":20,"column":21},"end":{"line":47,"column":1}},"21":{"start":{"line":21,"column":4},"end":{"line":46,"column":7}},"22":{"start":{"line":23,"column":8},"end":{"line":45,"column":9}},"23":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"24":{"start":{"line":26,"column":16},"end":{"line":26,"column":68}},"25":{"start":{"line":28,"column":12},"end":{"line":29,"column":85}},"26":{"start":{"line":29,"column":16},"end":{"line":29,"column":85}},"27":{"start":{"line":30,"column":28},"end":{"line":30,"column":94}},"28":{"start":{"line":31,"column":25},"end":{"line":31,"column":72}},"29":{"start":{"line":32,"column":12},"end":{"line":33,"column":79}},"30":{"start":{"line":33,"column":16},"end":{"line":33,"column":79}},"31":{"start":{"line":34,"column":12},"end":{"line":34,"column":46}},"32":{"start":{"line":35,"column":12},"end":{"line":35,"column":19}},"33":{"start":{"line":38,"column":12},"end":{"line":38,"column":42}},"34":{"start":{"line":39,"column":12},"end":{"line":39,"column":29}},"35":{"start":{"line":40,"column":12},"end":{"line":44,"column":15}},"36":{"start":{"line":48,"column":0},"end":{"line":48,"column":36}},"37":{"start":{"line":49,"column":23},"end":{"line":65,"column":1}},"38":{"start":{"line":50,"column":4},"end":{"line":64,"column":7}},"39":{"start":{"line":51,"column":8},"end":{"line":63,"column":9}},"40":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"41":{"start":{"line":53,"column":16},"end":{"line":53,"column":30}},"42":{"start":{"line":55,"column":12},"end":{"line":59,"column":15}},"43":{"start":{"line":62,"column":12},"end":{"line":62,"column":22}},"44":{"start":{"line":66,"column":0},"end":{"line":66,"column":40}},"45":{"start":{"line":67,"column":22},"end":{"line":86,"column":1}},"46":{"start":{"line":68,"column":4},"end":{"line":85,"column":7}},"47":{"start":{"line":69,"column":8},"end":{"line":84,"column":9}},"48":{"start":{"line":70,"column":29},"end":{"line":70,"column":39}},"49":{"start":{"line":71,"column":25},"end":{"line":71,"column":69}},"50":{"start":{"line":72,"column":12},"end":{"line":75,"column":13}},"51":{"start":{"line":74,"column":16},"end":{"line":74,"column":30}},"52":{"start":{"line":76,"column":12},"end":{"line":80,"column":15}},"53":{"start":{"line":83,"column":12},"end":{"line":83,"column":22}},"54":{"start":{"line":87,"column":0},"end":{"line":87,"column":38}},"55":{"start":{"line":88,"column":25},"end":{"line":107,"column":1}},"56":{"start":{"line":89,"column":4},"end":{"line":106,"column":7}},"57":{"start":{"line":90,"column":8},"end":{"line":105,"column":9}},"58":{"start":{"line":91,"column":33},"end":{"line":91,"column":43}},"59":{"start":{"line":92,"column":28},"end":{"line":92,"column":70}},"60":{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},"61":{"start":{"line":95,"column":16},"end":{"line":95,"column":30}},"62":{"start":{"line":97,"column":12},"end":{"line":101,"column":15}},"63":{"start":{"line":104,"column":12},"end":{"line":104,"column":22}},"64":{"start":{"line":108,"column":0},"end":{"line":108,"column":44}},"65":{"start":{"line":109,"column":22},"end":{"line":123,"column":1}},"66":{"start":{"line":110,"column":4},"end":{"line":122,"column":7}},"67":{"start":{"line":112,"column":8},"end":{"line":121,"column":9}},"68":{"start":{"line":113,"column":12},"end":{"line":114,"column":61}},"69":{"start":{"line":114,"column":16},"end":{"line":114,"column":61}},"70":{"start":{"line":115,"column":12},"end":{"line":115,"column":19}},"71":{"start":{"line":118,"column":12},"end":{"line":120,"column":88}},"72":{"start":{"line":124,"column":0},"end":{"line":124,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":21},"end":{"line":20,"column":22}},"loc":{"start":{"line":20,"column":47},"end":{"line":47,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":43},"end":{"line":21,"column":44}},"loc":{"start":{"line":21,"column":56},"end":{"line":46,"column":5}},"line":21},"10":{"name":"(anonymous_10)","decl":{"start":{"line":49,"column":23},"end":{"line":49,"column":24}},"loc":{"start":{"line":49,"column":49},"end":{"line":65,"column":1}},"line":49},"11":{"name":"(anonymous_11)","decl":{"start":{"line":50,"column":43},"end":{"line":50,"column":44}},"loc":{"start":{"line":50,"column":56},"end":{"line":64,"column":5}},"line":50},"12":{"name":"(anonymous_12)","decl":{"start":{"line":67,"column":22},"end":{"line":67,"column":23}},"loc":{"start":{"line":67,"column":48},"end":{"line":86,"column":1}},"line":67},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":43},"end":{"line":68,"column":44}},"loc":{"start":{"line":68,"column":56},"end":{"line":85,"column":5}},"line":68},"14":{"name":"(anonymous_14)","decl":{"start":{"line":88,"column":25},"end":{"line":88,"column":26}},"loc":{"start":{"line":88,"column":51},"end":{"line":107,"column":1}},"line":88},"15":{"name":"(anonymous_15)","decl":{"start":{"line":89,"column":43},"end":{"line":89,"column":44}},"loc":{"start":{"line":89,"column":56},"end":{"line":106,"column":5}},"line":89},"16":{"name":"(anonymous_16)","decl":{"start":{"line":109,"column":22},"end":{"line":109,"column":23}},"loc":{"start":{"line":109,"column":48},"end":{"line":123,"column":1}},"line":109},"17":{"name":"(anonymous_17)","decl":{"start":{"line":110,"column":43},"end":{"line":110,"column":44}},"loc":{"start":{"line":110,"column":56},"end":{"line":122,"column":5}},"line":110}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},{"start":{"line":25,"column":12},"end":{"line":27,"column":13}}],"line":25},"9":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":107}},"type":"cond-expr","locations":[{"start":{"line":25,"column":77},"end":{"line":25,"column":83}},{"start":{"line":25,"column":86},"end":{"line":25,"column":107}}],"line":25},"10":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":74}},"type":"binary-expr","locations":[{"start":{"line":25,"column":16},"end":{"line":25,"column":57}},{"start":{"line":25,"column":61},"end":{"line":25,"column":74}}],"line":25},"11":{"loc":{"start":{"line":28,"column":12},"end":{"line":29,"column":85}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":29,"column":85}},{"start":{"line":28,"column":12},"end":{"line":29,"column":85}}],"line":28},"12":{"loc":{"start":{"line":32,"column":12},"end":{"line":33,"column":79}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":33,"column":79}},{"start":{"line":32,"column":12},"end":{"line":33,"column":79}}],"line":32},"13":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"14":{"loc":{"start":{"line":72,"column":12},"end":{"line":75,"column":13}},"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":75,"column":13}},{"start":{"line":72,"column":12},"end":{"line":75,"column":13}}],"line":72},"15":{"loc":{"start":{"line":72,"column":16},"end":{"line":73,"column":59}},"type":"binary-expr","locations":[{"start":{"line":72,"column":16},"end":{"line":72,"column":118}},{"start":{"line":73,"column":16},"end":{"line":73,"column":59}}],"line":72},"16":{"loc":{"start":{"line":72,"column":51},"end":{"line":72,"column":117}},"type":"cond-expr","locations":[{"start":{"line":72,"column":86},"end":{"line":72,"column":92}},{"start":{"line":72,"column":95},"end":{"line":72,"column":117}}],"line":72},"17":{"loc":{"start":{"line":72,"column":51},"end":{"line":72,"column":83}},"type":"binary-expr","locations":[{"start":{"line":72,"column":51},"end":{"line":72,"column":64}},{"start":{"line":72,"column":68},"end":{"line":72,"column":83}}],"line":72},"18":{"loc":{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":96,"column":13}},{"start":{"line":93,"column":12},"end":{"line":96,"column":13}}],"line":93},"19":{"loc":{"start":{"line":93,"column":16},"end":{"line":94,"column":59}},"type":"binary-expr","locations":[{"start":{"line":93,"column":16},"end":{"line":93,"column":75}},{"start":{"line":94,"column":16},"end":{"line":94,"column":59}}],"line":93},"20":{"loc":{"start":{"line":113,"column":12},"end":{"line":114,"column":61}},"type":"if","locations":[{"start":{"line":113,"column":12},"end":{"line":114,"column":61}},{"start":{"line":113,"column":12},"end":{"line":114,"column":61}}],"line":113},"21":{"loc":{"start":{"line":113,"column":18},"end":{"line":113,"column":102}},"type":"cond-expr","locations":[{"start":{"line":113,"column":80},"end":{"line":113,"column":86}},{"start":{"line":113,"column":89},"end":{"line":113,"column":102}}],"line":113},"22":{"loc":{"start":{"line":113,"column":18},"end":{"line":113,"column":77}},"type":"binary-expr","locations":[{"start":{"line":113,"column":18},"end":{"line":113,"column":60}},{"start":{"line":113,"column":64},"end":{"line":113,"column":77}}],"line":113}},"s":{"0":1,"1":7,"2":7,"3":6,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":13,"11":6,"12":1,"13":4,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":3,"22":3,"23":3,"24":3,"25":3,"26":0,"27":3,"28":3,"29":3,"30":0,"31":3,"32":3,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":0,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":0,"52":1,"53":0,"54":1,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":0,"71":1,"72":1},"f":{"0":6,"1":7,"2":7,"3":6,"4":7,"5":0,"6":13,"7":4,"8":3,"9":3,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":1,"17":1},"b":{"0":[1,1,1],"1":[0,7],"2":[6,6],"3":[6,7],"4":[6,6],"5":[1,1,1],"6":[3,1],"7":[4,4],"8":[3,0],"9":[0,3],"10":[3,3],"11":[0,3],"12":[0,3],"13":[0,1],"14":[0,1],"15":[1,1],"16":[1,0],"17":[1,0],"18":[0,0],"19":[0,0],"20":[1,0],"21":[0,1],"22":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/middleware/middleware.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/middleware/middleware.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport User from \"../database/models/usersModel\";\r\nimport Blog from \"../database/models/blogsModel\";\r\nimport Comment from \"../database/models/commentsModel\";\r\n\r\nexport const authenticate = async function (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  try {\r\n    let token: any;\r\n    if (req.headers.authorization?.includes(\"Bearer\")) {\r\n      token = req.headers.authorization.split(\" \").at(-1);\r\n    }\r\n\r\n    if (!token)\r\n      throw new Error(\"You don't have permission to access this resource\");\r\n    const decoded: any = await jwt.verify(token, process.env.JWT_SECRET);\r\n    const user = await User.findById(decoded.id);\r\n    if (!user) throw new Error(\"Token is incorrect. Logout and login again.\");\r\n    req.body.authenticatedUser = user;\r\n    next();\r\n  } catch (err) {\r\n    console.log(\"In catch block\");\r\n    console.log(err);\r\n    res.status(401).json({\r\n      ok: false,\r\n      message: \"fail\",\r\n      errors: { message: \"You don't have permission to access this resource\" },\r\n    });\r\n  }\r\n};\r\n\r\nexport const authorizeUsers = async function (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  try {\r\n    if (req.body.authenticatedUser.role === \"admin\") {\r\n      return next();\r\n    }\r\n    res.status(403).json({\r\n      ok: false,\r\n      message: \"fail\",\r\n      data: { message: \"You're not allowed to access this resource!!!\" },\r\n    });\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const authorizeBlog = async function (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  try {\r\n    const { slug } = req.params;\r\n    const blog = await Blog.findOne({ slug });\r\n    if (\r\n      req.body.authenticatedUser.id === blog?.author.toString() ||\r\n      req.body.authenticatedUser.role === \"admin\"\r\n    ) {\r\n      return next();\r\n    }\r\n    res.status(403).json({\r\n      ok: false,\r\n      message: \"fail\",\r\n      data: { message: \"You're not allowed to access this resource!!!\" },\r\n    });\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const authorizeComment = async function (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  try {\r\n    const { slug, id } = req.params;\r\n    const comment = await Comment.findById(id);\r\n    if (\r\n      req.body.authenticatedUser.id === comment.author.toString() ||\r\n      req.body.authenticatedUser.role === \"admin\"\r\n    ) {\r\n      return next();\r\n    }\r\n    res.status(403).json({\r\n      ok: false,\r\n      message: \"fail\",\r\n      data: { message: \"You're not allowed to access this resource!!!\" },\r\n    });\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const isVerifiedFun = async function (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) {\r\n  try {\r\n    if (!req.body.authenticatedUser?.isVerified)\r\n      throw new Error(\"Verify your account first\");\r\n    next();\r\n  } catch (err: any) {\r\n    res\r\n      .status(500)\r\n      .json({ ok: false, message: \"fail\", errors: { message: err.message } });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"458d13717ab7dc6de26853adb20f31f9b79d998f"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\users\\controllers\\userController.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\users\\controllers\\userController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":104}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":63}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":59}},"18":{"start":{"line":18,"column":25},"end":{"line":18,"column":64}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":84}},"20":{"start":{"line":20,"column":14},"end":{"line":39,"column":1}},"21":{"start":{"line":21,"column":4},"end":{"line":38,"column":7}},"22":{"start":{"line":22,"column":8},"end":{"line":37,"column":9}},"23":{"start":{"line":23,"column":25},"end":{"line":26,"column":13}},"24":{"start":{"line":27,"column":30},"end":{"line":27,"column":94}},"25":{"start":{"line":28,"column":26},"end":{"line":28,"column":53}},"26":{"start":{"line":29,"column":12},"end":{"line":31,"column":80}},"27":{"start":{"line":34,"column":12},"end":{"line":34,"column":40}},"28":{"start":{"line":35,"column":27},"end":{"line":35,"column":66}},"29":{"start":{"line":36,"column":12},"end":{"line":36,"column":73}},"30":{"start":{"line":40,"column":0},"end":{"line":40,"column":22}},"31":{"start":{"line":41,"column":15},"end":{"line":41,"column":32}},"32":{"start":{"line":42,"column":22},"end":{"line":47,"column":1}},"33":{"start":{"line":43,"column":18},"end":{"line":45,"column":6}},"34":{"start":{"line":46,"column":4},"end":{"line":46,"column":17}},"35":{"start":{"line":48,"column":20},"end":{"line":54,"column":2}},"36":{"start":{"line":55,"column":24},"end":{"line":71,"column":2}},"37":{"start":{"line":55,"column":34},"end":{"line":71,"column":2}},"38":{"start":{"line":56,"column":4},"end":{"line":70,"column":5}},"39":{"start":{"line":57,"column":28},"end":{"line":64,"column":9}},"40":{"start":{"line":65,"column":21},"end":{"line":65,"column":60}},"41":{"start":{"line":66,"column":8},"end":{"line":66,"column":58}},"42":{"start":{"line":69,"column":8},"end":{"line":69,"column":66}},"43":{"start":{"line":72,"column":26},"end":{"line":78,"column":1}},"44":{"start":{"line":73,"column":14},"end":{"line":73,"column":16}},"45":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"46":{"start":{"line":74,"column":17},"end":{"line":74,"column":18}},"47":{"start":{"line":75,"column":8},"end":{"line":75,"column":50}},"48":{"start":{"line":77,"column":4},"end":{"line":77,"column":15}},"49":{"start":{"line":79,"column":15},"end":{"line":110,"column":1}},"50":{"start":{"line":80,"column":4},"end":{"line":109,"column":7}},"51":{"start":{"line":81,"column":8},"end":{"line":108,"column":9}},"52":{"start":{"line":83,"column":24},"end":{"line":83,"column":43}},"53":{"start":{"line":84,"column":25},"end":{"line":90,"column":13}},"54":{"start":{"line":91,"column":12},"end":{"line":92,"column":36}},"55":{"start":{"line":92,"column":16},"end":{"line":92,"column":36}},"56":{"start":{"line":93,"column":28},"end":{"line":93,"column":75}},"57":{"start":{"line":94,"column":12},"end":{"line":94,"column":37}},"58":{"start":{"line":96,"column":12},"end":{"line":96,"column":43}},"59":{"start":{"line":97,"column":26},"end":{"line":97,"column":51}},"60":{"start":{"line":98,"column":12},"end":{"line":100,"column":78}},"61":{"start":{"line":103,"column":27},"end":{"line":103,"column":68}},"62":{"start":{"line":104,"column":12},"end":{"line":105,"column":53}},"63":{"start":{"line":105,"column":16},"end":{"line":105,"column":53}},"64":{"start":{"line":106,"column":12},"end":{"line":106,"column":31}},"65":{"start":{"line":107,"column":12},"end":{"line":107,"column":73}},"66":{"start":{"line":111,"column":0},"end":{"line":111,"column":24}},"67":{"start":{"line":112,"column":22},"end":{"line":128,"column":1}},"68":{"start":{"line":113,"column":4},"end":{"line":127,"column":7}},"69":{"start":{"line":114,"column":8},"end":{"line":126,"column":9}},"70":{"start":{"line":115,"column":28},"end":{"line":115,"column":39}},"71":{"start":{"line":116,"column":25},"end":{"line":116,"column":73}},"72":{"start":{"line":117,"column":12},"end":{"line":118,"column":66}},"73":{"start":{"line":118,"column":16},"end":{"line":118,"column":66}},"74":{"start":{"line":119,"column":32},"end":{"line":119,"column":143}},"75":{"start":{"line":120,"column":12},"end":{"line":120,"column":86}},"76":{"start":{"line":123,"column":12},"end":{"line":125,"column":88}},"77":{"start":{"line":129,"column":0},"end":{"line":129,"column":38}},"78":{"start":{"line":130,"column":17},"end":{"line":140,"column":1}},"79":{"start":{"line":131,"column":4},"end":{"line":139,"column":7}},"80":{"start":{"line":132,"column":8},"end":{"line":138,"column":9}},"81":{"start":{"line":133,"column":26},"end":{"line":133,"column":67}},"82":{"start":{"line":134,"column":12},"end":{"line":134,"column":80}},"83":{"start":{"line":137,"column":12},"end":{"line":137,"column":78}},"84":{"start":{"line":141,"column":0},"end":{"line":141,"column":28}},"85":{"start":{"line":142,"column":19},"end":{"line":154,"column":1}},"86":{"start":{"line":143,"column":4},"end":{"line":153,"column":7}},"87":{"start":{"line":144,"column":8},"end":{"line":152,"column":9}},"88":{"start":{"line":145,"column":27},"end":{"line":145,"column":37}},"89":{"start":{"line":146,"column":12},"end":{"line":146,"column":58}},"90":{"start":{"line":147,"column":26},"end":{"line":147,"column":67}},"91":{"start":{"line":148,"column":12},"end":{"line":148,"column":80}},"92":{"start":{"line":151,"column":12},"end":{"line":151,"column":78}},"93":{"start":{"line":155,"column":0},"end":{"line":155,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":14},"end":{"line":20,"column":15}},"loc":{"start":{"line":20,"column":34},"end":{"line":39,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":43},"end":{"line":21,"column":44}},"loc":{"start":{"line":21,"column":56},"end":{"line":38,"column":5}},"line":21},"10":{"name":"(anonymous_10)","decl":{"start":{"line":42,"column":22},"end":{"line":42,"column":23}},"loc":{"start":{"line":42,"column":36},"end":{"line":47,"column":1}},"line":42},"11":{"name":"(anonymous_11)","decl":{"start":{"line":55,"column":24},"end":{"line":55,"column":25}},"loc":{"start":{"line":55,"column":34},"end":{"line":71,"column":2}},"line":55},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":68},"end":{"line":55,"column":69}},"loc":{"start":{"line":55,"column":81},"end":{"line":71,"column":1}},"line":55},"13":{"name":"(anonymous_13)","decl":{"start":{"line":72,"column":26},"end":{"line":72,"column":27}},"loc":{"start":{"line":72,"column":38},"end":{"line":78,"column":1}},"line":72},"14":{"name":"(anonymous_14)","decl":{"start":{"line":79,"column":15},"end":{"line":79,"column":16}},"loc":{"start":{"line":79,"column":35},"end":{"line":110,"column":1}},"line":79},"15":{"name":"(anonymous_15)","decl":{"start":{"line":80,"column":43},"end":{"line":80,"column":44}},"loc":{"start":{"line":80,"column":56},"end":{"line":109,"column":5}},"line":80},"16":{"name":"(anonymous_16)","decl":{"start":{"line":112,"column":22},"end":{"line":112,"column":23}},"loc":{"start":{"line":112,"column":42},"end":{"line":128,"column":1}},"line":112},"17":{"name":"(anonymous_17)","decl":{"start":{"line":113,"column":43},"end":{"line":113,"column":44}},"loc":{"start":{"line":113,"column":56},"end":{"line":127,"column":5}},"line":113},"18":{"name":"(anonymous_18)","decl":{"start":{"line":130,"column":17},"end":{"line":130,"column":18}},"loc":{"start":{"line":130,"column":37},"end":{"line":140,"column":1}},"line":130},"19":{"name":"(anonymous_19)","decl":{"start":{"line":131,"column":43},"end":{"line":131,"column":44}},"loc":{"start":{"line":131,"column":56},"end":{"line":139,"column":5}},"line":131},"20":{"name":"(anonymous_20)","decl":{"start":{"line":142,"column":19},"end":{"line":142,"column":20}},"loc":{"start":{"line":142,"column":39},"end":{"line":154,"column":1}},"line":142},"21":{"name":"(anonymous_21)","decl":{"start":{"line":143,"column":43},"end":{"line":143,"column":44}},"loc":{"start":{"line":143,"column":56},"end":{"line":153,"column":5}},"line":143}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":91,"column":12},"end":{"line":92,"column":36}},"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":92,"column":36}},{"start":{"line":91,"column":12},"end":{"line":92,"column":36}}],"line":91},"9":{"loc":{"start":{"line":104,"column":12},"end":{"line":105,"column":53}},"type":"if","locations":[{"start":{"line":104,"column":12},"end":{"line":105,"column":53}},{"start":{"line":104,"column":12},"end":{"line":105,"column":53}}],"line":104},"10":{"loc":{"start":{"line":117,"column":12},"end":{"line":118,"column":66}},"type":"if","locations":[{"start":{"line":117,"column":12},"end":{"line":118,"column":66}},{"start":{"line":117,"column":12},"end":{"line":118,"column":66}}],"line":117}},"s":{"0":1,"1":3,"2":0,"3":2,"4":3,"5":3,"6":0,"7":0,"8":0,"9":0,"10":5,"11":2,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":0,"43":1,"44":1,"45":1,"46":1,"47":5,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":0,"56":1,"57":1,"58":1,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":1,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":1,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1},"f":{"0":2,"1":3,"2":0,"3":2,"4":3,"5":0,"6":5,"7":3,"8":0,"9":0,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[1,1,1],"1":[3,0],"2":[2,2],"3":[2,3],"4":[2,2],"5":[1,1,1],"6":[1,2],"7":[3,3],"8":[0,1],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/users/controllers/userController.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/users/controllers/userController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,gEAA+B;AAC/B,4DAAoC;AAEpC,iEAKsC;AACtC,qFAAuD;AAEhD,MAAM,KAAK,GAAG,UAAgB,GAAY,EAAE,GAAa;;QAC9D,IAAI,CAAC;YACH,MAAM,IAAI,GAAG;gBACX,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;gBACrB,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;aAC5B,CAAC;YACF,MAAM,SAAS,GAAG,MAAM,IAAA,0BAAS,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7D,MAAM,KAAK,GAAG,aAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YAC1C,GAAG;iBACA,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;QACpE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;YAC5B,MAAM,MAAM,GAAG,EAAE,QAAQ,EAAE,yBAAyB,EAAE,CAAC;YACvD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QAC/D,CAAC;IACH,CAAC;CAAA,CAAC;AAhBW,QAAA,KAAK,SAgBhB;AAEF,MAAM,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACjC,MAAM,aAAa,GAAG,UAAU,EAAE;IAChC,MAAM,KAAK,GAAG,sBAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE;QACrD,SAAS,EAAE,MAAM;KAClB,CAAC,CAAC;IACH,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,MAAM,WAAW,GAAG,oBAAU,CAAC,eAAe,CAAC;IAC7C,OAAO,EAAE,OAAO;IAChB,IAAI,EAAE;QACJ,IAAI,EAAE,oCAAoC;QAC1C,IAAI,EAAE,qBAAqB;KAC5B;CACF,CAAC,CAAC;AAEH,MAAM,eAAe,GAAG,CAAO,IAAI,EAAE,EAAE;IACrC,IAAI,CAAC;QACH,MAAM,WAAW,GAAG;YAClB,IAAI,EAAE,oCAAoC;YAC1C,EAAE,EAAE,IAAI,CAAC,KAAK;YACd,OAAO,EAAE,4BAA4B;YACrC,IAAI,EAAE;4CACgC,IAAI,CAAC,GAAG;OAC7C;SACF,CAAC;QACF,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC,CAAC;IACpD,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;IAC5D,CAAC;AACH,CAAC,CAAA,CAAC;AAEF,MAAM,iBAAiB,GAAG;IACxB,IAAI,GAAG,GAAG,EAAE,CAAC;IACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAC5B,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;IAC5C,CAAC;IACD,OAAO,GAAG,CAAC;AACb,CAAC,CAAC;AAEK,MAAM,MAAM,GAAG,UAAgB,GAAY,EAAE,GAAa;;QAC/D,IAAI,CAAC;YACH,uBAAuB;YACvB,MAAM,GAAG,GAAG,iBAAiB,EAAE,CAAC;YAEhC,MAAM,IAAI,GAAQ;gBAChB,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;gBAC3B,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;gBACrB,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;gBAC3B,gBAAgB;gBAChB,GAAG,EAAE,GAAG;aACT,CAAC;YAEF,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,oCAAoC,CAAC;gBAC3D,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;YAEtB,MAAM,OAAO,GAAG,MAAM,IAAA,8BAAa,EAAC,IAAI,CAAC,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAEzB,0BAA0B;YAC1B,MAAM,eAAe,CAAC,OAAO,CAAC,CAAC;YAE/B,MAAM,KAAK,GAAG,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACxC,GAAG;iBACA,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAClE,CAAC;QAAC,OAAO,GAAQ,EAAE,CAAC;YAClB,MAAM,MAAM,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;YACzD,IAAI,GAAG,CAAC,IAAI,KAAK,KAAK;gBAAE,MAAM,CAAC,KAAK,GAAG,qBAAqB,CAAC;YAC7D,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QAC/D,CAAC;IACH,CAAC;CAAA,CAAC;AAhCW,QAAA,MAAM,UAgCjB;AAEK,MAAM,aAAa,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACtE,IAAI,CAAC;YACH,MAAM,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC;YAC5B,MAAM,IAAI,GAAG,MAAM,oBAAI,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;YAC9C,IAAI,CAAC,IAAI;gBAAE,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;YAC7D,MAAM,WAAW,GAAG,MAAM,oBAAI,CAAC,iBAAiB,CAC9C,IAAI,CAAC,EAAE,EACP,EAAE,UAAU,EAAE,IAAI,EAAE,EACpB,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,CACnC,CAAC;YACF,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;QAC5E,CAAC;QAAC,OAAO,GAAQ,EAAE,CAAC;YAClB,GAAG;iBACA,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;CAAA,CAAC;AAhBW,QAAA,aAAa,iBAgBxB;AAEK,MAAM,QAAQ,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACjE,IAAI,CAAC;YACH,MAAM,KAAK,GAAG,MAAM,IAAA,4BAAW,GAAE,CAAC;YAClC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QACtE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AAPW,QAAA,QAAQ,YAOnB;AAEK,MAAM,UAAU,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACnE,IAAI,CAAC;YACH,MAAM,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC1B,MAAM,IAAA,8BAAa,EAAC,EAAE,CAAC,CAAC;YACxB,MAAM,KAAK,GAAG,MAAM,IAAA,4BAAW,GAAE,CAAC;YAClC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QACtE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AATW,QAAA,UAAU,cASrB","sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport nodemailer from \"nodemailer\";\r\nimport { Request, Response } from \"express\";\r\nimport {\r\n  createNewUser,\r\n  deleteOneUser,\r\n  getAllUsers,\r\n  loginUser,\r\n} from \"../repository/userRepository\";\r\nimport User from \"../../../database/models/usersModel\";\r\n\r\nexport const login = async function (req: Request, res: Response) {\r\n  try {\r\n    const user = {\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n    };\r\n    const foundUser = await loginUser(user.email, user.password);\r\n    const token = generateToken(foundUser.id);\r\n    res\r\n      .status(200)\r\n      .json({ ok: true, message: \"success\", data: foundUser, token });\r\n  } catch (err) {\r\n    console.log(\"Error: \", err);\r\n    const errors = { password: \"Wrong email or password\" };\r\n    res.status(401).json({ ok: false, message: \"fail\", errors });\r\n  }\r\n};\r\n\r\nconst maxAge = 30 * 24 * 60 * 60;\r\nconst generateToken = function (id) {\r\n  const token = jwt.sign({ id }, process.env.JWT_SECRET, {\r\n    expiresIn: maxAge,\r\n  });\r\n  return token;\r\n};\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  service: \"gmail\",\r\n  auth: {\r\n    user: \"dushimimanafabricerwanda@gmail.com\",\r\n    pass: \"zenz lbbo eorl gltg\",\r\n  },\r\n});\r\n\r\nconst sendSignupEmail = async (user) => {\r\n  try {\r\n    const mailOptions = {\r\n      from: \"dushimimanafabricerwanda@gmail.com\",\r\n      to: user.email,\r\n      subject: \"Welcome to our site 😎😎😎\",\r\n      html: `\r\n      <h3>Your account verification code: ${user.OTP}</h3>\r\n      `,\r\n    };\r\n    const sent = await transporter.sendMail(mailOptions);\r\n    console.log(\"Verfication code sent successfully\");\r\n  } catch (error) {\r\n    console.error(\"Error sending subscription email:\", error);\r\n  }\r\n};\r\n\r\nconst generateRandomOTP = function () {\r\n  let otp = \"\";\r\n  for (let i = 1; i <= 5; i++) {\r\n    otp += Math.floor(Math.random() * 10) + 1;\r\n  }\r\n  return otp;\r\n};\r\n\r\nexport const signup = async function (req: Request, res: Response) {\r\n  try {\r\n    //? Generate random OTP\r\n    const otp = generateRandomOTP();\r\n\r\n    const user: any = {\r\n      fullname: req.body.fullName,\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n      // role: \"user\",\r\n      OTP: otp,\r\n    };\r\n\r\n    if (user.email.includes(\"dushimimanafabricerwanda@gmail.com\"))\r\n      user.role = \"admin\";\r\n\r\n    const newUser = await createNewUser(user);\r\n    console.log(newUser.OTP);\r\n\r\n    //? send email to the user\r\n    await sendSignupEmail(newUser);\r\n\r\n    const token = generateToken(newUser.id);\r\n    res\r\n      .status(201)\r\n      .json({ ok: true, message: \"success\", data: newUser, token });\r\n  } catch (err: any) {\r\n    const errors = { fullname: \"\", email: \"\", password: \"\" };\r\n    if (err.code === 11000) errors.email = \"Email already taken\";\r\n    console.error(err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors });\r\n  }\r\n};\r\n\r\nexport const verifyAccount = async function (req: Request, res: Response) {\r\n  try {\r\n    const { otp } = req.headers;\r\n    const user = await User.findOne({ OTP: otp });\r\n    if (!user) throw new Error(\"Verification code is incorrect\");\r\n    const updatedUser = await User.findByIdAndUpdate(\r\n      user.id,\r\n      { isVerified: true },\r\n      { new: true, runValidators: true }\r\n    );\r\n    res.status(200).json({ ok: true, message: \"success\", data: updatedUser });\r\n  } catch (err: any) {\r\n    res\r\n      .status(500)\r\n      .json({ ok: false, message: \"fail\", errors: { message: err.message } });\r\n  }\r\n};\r\n\r\nexport const getUsers = async function (req: Request, res: Response) {\r\n  try {\r\n    const users = await getAllUsers();\r\n    res.status(200).json({ ok: true, message: \"success\", data: users });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const deleteUser = async function (req: Request, res: Response) {\r\n  try {\r\n    const { id } = req.params;\r\n    await deleteOneUser(id);\r\n    const users = await getAllUsers();\r\n    res.status(200).json({ ok: true, message: \"success\", data: users });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e4caac5edfc0bc374a54ebd66e4e8ff315a8f0ff"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\contactRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\contactRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":28},"end":{"line":8,"column":88}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":13,"column":98}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":113}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/contactRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/contactRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAE9B,yDAAwE;AACxE,yFAI2D;AAC3D,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM;KACH,KAAK,CAAC,GAAG,CAAC;KACV,IAAI,CAAC,iCAAa,CAAC;KACnB,GAAG,CAAC,yBAAY,EAAE,2BAAc,EAAE,+BAAW,CAAC,CAAC;AAClD,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,yBAAY,EAAE,2BAAc,EAAE,iCAAa,CAAC,CAAC;AAEnE,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\n\r\nimport { authenticate, authorizeUsers } from \"../middleware/middleware\";\r\nimport {\r\n  createMessage,\r\n  deleteMessage,\r\n  getMessages,\r\n} from \"../modules/contacts/controllers/contactController\";\r\nconst router = express.Router();\r\n\r\nrouter\r\n  .route(\"/\")\r\n  .post(createMessage)\r\n  .get(authenticate, authorizeUsers, getMessages);\r\nrouter.delete(\"/:id\", authenticate, authorizeUsers, deleteMessage);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"22d666901d2f8f66b047a1bcb865076665b2bdc1"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\contacts\\controllers\\contactController.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\contacts\\controllers\\contactController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":102}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":59}},"17":{"start":{"line":17,"column":28},"end":{"line":17,"column":70}},"18":{"start":{"line":18,"column":20},"end":{"line":24,"column":2}},"19":{"start":{"line":25,"column":25},"end":{"line":40,"column":2}},"20":{"start":{"line":25,"column":36},"end":{"line":40,"column":2}},"21":{"start":{"line":26,"column":4},"end":{"line":39,"column":5}},"22":{"start":{"line":27,"column":28},"end":{"line":33,"column":9}},"23":{"start":{"line":34,"column":21},"end":{"line":34,"column":60}},"24":{"start":{"line":35,"column":8},"end":{"line":35,"column":49}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":66}},"26":{"start":{"line":41,"column":23},"end":{"line":43,"column":1}},"27":{"start":{"line":42,"column":4},"end":{"line":42,"column":27}},"28":{"start":{"line":44,"column":0},"end":{"line":44,"column":40}},"29":{"start":{"line":45,"column":22},"end":{"line":61,"column":1}},"30":{"start":{"line":46,"column":4},"end":{"line":60,"column":7}},"31":{"start":{"line":47,"column":8},"end":{"line":59,"column":9}},"32":{"start":{"line":48,"column":31},"end":{"line":48,"column":107}},"33":{"start":{"line":49,"column":12},"end":{"line":49,"column":53}},"34":{"start":{"line":50,"column":12},"end":{"line":54,"column":15}},"35":{"start":{"line":57,"column":12},"end":{"line":57,"column":29}},"36":{"start":{"line":58,"column":12},"end":{"line":58,"column":78}},"37":{"start":{"line":62,"column":0},"end":{"line":62,"column":38}},"38":{"start":{"line":63,"column":20},"end":{"line":73,"column":1}},"39":{"start":{"line":64,"column":4},"end":{"line":72,"column":7}},"40":{"start":{"line":65,"column":8},"end":{"line":71,"column":9}},"41":{"start":{"line":66,"column":29},"end":{"line":66,"column":76}},"42":{"start":{"line":67,"column":12},"end":{"line":67,"column":83}},"43":{"start":{"line":70,"column":12},"end":{"line":70,"column":78}},"44":{"start":{"line":74,"column":0},"end":{"line":74,"column":34}},"45":{"start":{"line":75,"column":22},"end":{"line":87,"column":1}},"46":{"start":{"line":76,"column":4},"end":{"line":86,"column":7}},"47":{"start":{"line":77,"column":8},"end":{"line":85,"column":9}},"48":{"start":{"line":78,"column":27},"end":{"line":78,"column":37}},"49":{"start":{"line":79,"column":12},"end":{"line":79,"column":65}},"50":{"start":{"line":80,"column":29},"end":{"line":80,"column":76}},"51":{"start":{"line":81,"column":12},"end":{"line":81,"column":83}},"52":{"start":{"line":84,"column":12},"end":{"line":84,"column":78}},"53":{"start":{"line":88,"column":0},"end":{"line":88,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":25,"column":25},"end":{"line":25,"column":26}},"loc":{"start":{"line":25,"column":36},"end":{"line":40,"column":2}},"line":25},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":70},"end":{"line":25,"column":71}},"loc":{"start":{"line":25,"column":83},"end":{"line":40,"column":1}},"line":25},"10":{"name":"(anonymous_10)","decl":{"start":{"line":41,"column":23},"end":{"line":41,"column":24}},"loc":{"start":{"line":41,"column":43},"end":{"line":43,"column":1}},"line":41},"11":{"name":"(anonymous_11)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":42},"end":{"line":61,"column":1}},"line":45},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":43},"end":{"line":46,"column":44}},"loc":{"start":{"line":46,"column":56},"end":{"line":60,"column":5}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":63,"column":20},"end":{"line":63,"column":21}},"loc":{"start":{"line":63,"column":40},"end":{"line":73,"column":1}},"line":63},"14":{"name":"(anonymous_14)","decl":{"start":{"line":64,"column":43},"end":{"line":64,"column":44}},"loc":{"start":{"line":64,"column":56},"end":{"line":72,"column":5}},"line":64},"15":{"name":"(anonymous_15)","decl":{"start":{"line":75,"column":22},"end":{"line":75,"column":23}},"loc":{"start":{"line":75,"column":42},"end":{"line":87,"column":1}},"line":75},"16":{"name":"(anonymous_16)","decl":{"start":{"line":76,"column":43},"end":{"line":76,"column":44}},"loc":{"start":{"line":76,"column":56},"end":{"line":86,"column":5}},"line":76}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/contacts/controllers/contactController.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/contacts/controllers/contactController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport Contact from \"./../../../database/models/contactsModel\";\r\nimport nodemailer from \"nodemailer\";\r\nimport {\r\n  createNewMessage,\r\n  deleteMessageById,\r\n  getAllMessages,\r\n} from \"../repository/contactRepository\";\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  service: \"gmail\",\r\n  auth: {\r\n    user: \"dushimimanafabricerwanda@gmail.com\",\r\n    pass: \"zenz lbbo eorl gltg\",\r\n  },\r\n});\r\n\r\nconst sendMessageEmail = async (email: string) => {\r\n  try {\r\n    const mailOptions = {\r\n      from: email,\r\n      to: \"dushimimanafabricerwanda@gmail.com\",\r\n      subject: \"You have a message on your site 😎😎😎\",\r\n      html: `<p>You can reply to it or delete it if you want</p>\r\n      `,\r\n    };\r\n    const sent = await transporter.sendMail(mailOptions);\r\n    console.log(\"Message sent successfully\");\r\n  } catch (error) {\r\n    console.error(\"Error sending subscription email:\", error);\r\n  }\r\n};\r\n\r\nexport const getContactForm = function (req: Request, res: Response) {\r\n  res.render(\"contacts\");\r\n};\r\n\r\nexport const createMessage = async function (req: Request, res: Response) {\r\n  try {\r\n    const newContact = await createNewMessage({ ...req.body });\r\n\r\n    await sendMessageEmail(newContact.email);\r\n    res.status(200).json({\r\n      ok: true,\r\n      message: \"success\",\r\n      data: newContact,\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const getMessages = async function (req: Request, res: Response) {\r\n  try {\r\n    const messages = await getAllMessages();\r\n    res.status(200).json({ ok: true, message: \"success\", data: messages });\r\n  } catch (err) {\r\n    res.status(200).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const deleteMessage = async function (req: Request, res: Response) {\r\n  try {\r\n    const { id } = req.params;\r\n    await deleteMessageById(id);\r\n    const messages = await getAllMessages();\r\n    res.status(200).json({ ok: true, message: \"success\", data: messages });\r\n  } catch (err) {\r\n    res.status(200).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cc9d02eb12ecb394079efee87c21b291336322b8"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\blogRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\blogRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":41}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":56}},"6":{"start":{"line":9,"column":26},"end":{"line":9,"column":81}},"7":{"start":{"line":22,"column":0},"end":{"line":22,"column":50}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":141}},"9":{"start":{"line":25,"column":0},"end":{"line":29,"column":125}},"10":{"start":{"line":30,"column":0},"end":{"line":30,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/blogRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/blogRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,yDAIkC;AAClC,kFAOsD;AAEtD;;;;;;;;;;GAUG;AACH,6BAA6B;AAC7B,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,0BAAQ,CAAC,CAAC;AAChC,mEAAmE;AAEnE,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,iCAAe,EAAE,yBAAY,EAAE,0BAAa,EAAE,4BAAU,CAAC,CAAC;AAE/E,MAAM;KACH,KAAK,CAAC,QAAQ,CAAC;KACf,GAAG,CAAC,yBAAO,CAAC;KACZ,GAAG,CAAC,iCAAe,EAAE,yBAAY,EAAE,0BAAa,EAAE,0BAAa,EAAE,4BAAU,CAAC;KAC5E,MAAM,CAAC,yBAAY,EAAE,0BAAa,EAAE,0BAAa,EAAE,4BAAU,CAAC,CAAC;AAElE,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nconst router = express.Router();\r\n\r\nimport {\r\n  authenticate,\r\n  authorizeBlog,\r\n  isVerifiedFun,\r\n} from \"../middleware/middleware\";\r\nimport {\r\n  createBlog,\r\n  deleteBlog,\r\n  getBlog,\r\n  getBlogs,\r\n  updateBlog,\r\n  uploadUserPhoto,\r\n} from \"../modules/blogs/controllers/blogControllers\";\r\n\r\n/**\r\n * @swagger\r\n * /:\r\n *  get:\r\n *      summary: This api endpoint is used to get all the blogs\r\n *      description: This api endpoint is used to get all the blogs\r\n *      responses:\r\n *          200:\r\n *              description: To test GET method\r\n\r\n */\r\n// router.get(\"/\", getBlogs);\r\nrouter.route(\"/\").get(getBlogs);\r\n// .post(uploadUserPhoto, authenticate, isVerifiedFun, createBlog);\r\n\r\nrouter.post(\"/post\", uploadUserPhoto, authenticate, isVerifiedFun, createBlog);\r\n\r\nrouter\r\n  .route(\"/:slug\")\r\n  .get(getBlog)\r\n  .put(uploadUserPhoto, authenticate, isVerifiedFun, authorizeBlog, updateBlog)\r\n  .delete(authenticate, authorizeBlog, isVerifiedFun, deleteBlog);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bdc964bc06b817f61729e01f1776dfd189975360"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\blogs\\controllers\\blogControllers.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\blogs\\controllers\\blogControllers.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":133}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":86}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":59}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":51}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":42}},"20":{"start":{"line":20,"column":25},"end":{"line":20,"column":94}},"21":{"start":{"line":21,"column":25},"end":{"line":21,"column":66}},"22":{"start":{"line":22,"column":25},"end":{"line":22,"column":73}},"23":{"start":{"line":23,"column":17},"end":{"line":33,"column":1}},"24":{"start":{"line":24,"column":4},"end":{"line":32,"column":7}},"25":{"start":{"line":25,"column":8},"end":{"line":31,"column":9}},"26":{"start":{"line":26,"column":26},"end":{"line":26,"column":67}},"27":{"start":{"line":27,"column":12},"end":{"line":27,"column":80}},"28":{"start":{"line":30,"column":12},"end":{"line":30,"column":78}},"29":{"start":{"line":34,"column":0},"end":{"line":34,"column":28}},"30":{"start":{"line":35,"column":16},"end":{"line":51,"column":1}},"31":{"start":{"line":36,"column":4},"end":{"line":50,"column":7}},"32":{"start":{"line":37,"column":8},"end":{"line":49,"column":9}},"33":{"start":{"line":38,"column":29},"end":{"line":38,"column":39}},"34":{"start":{"line":39,"column":31},"end":{"line":39,"column":78}},"35":{"start":{"line":40,"column":12},"end":{"line":41,"column":50}},"36":{"start":{"line":41,"column":16},"end":{"line":41,"column":50}},"37":{"start":{"line":42,"column":25},"end":{"line":42,"column":69}},"38":{"start":{"line":43,"column":12},"end":{"line":43,"column":79}},"39":{"start":{"line":46,"column":12},"end":{"line":48,"column":88}},"40":{"start":{"line":52,"column":0},"end":{"line":52,"column":26}},"41":{"start":{"line":53,"column":20},"end":{"line":59,"column":2}},"42":{"start":{"line":60,"column":30},"end":{"line":74,"column":2}},"43":{"start":{"line":60,"column":48},"end":{"line":74,"column":2}},"44":{"start":{"line":61,"column":4},"end":{"line":73,"column":5}},"45":{"start":{"line":62,"column":28},"end":{"line":67,"column":9}},"46":{"start":{"line":68,"column":8},"end":{"line":68,"column":48}},"47":{"start":{"line":69,"column":8},"end":{"line":69,"column":60}},"48":{"start":{"line":72,"column":8},"end":{"line":72,"column":66}},"49":{"start":{"line":75,"column":22},"end":{"line":84,"column":2}},"50":{"start":{"line":77,"column":8},"end":{"line":77,"column":25}},"51":{"start":{"line":80,"column":26},"end":{"line":80,"column":57}},"52":{"start":{"line":81,"column":20},"end":{"line":81,"column":47}},"53":{"start":{"line":82,"column":8},"end":{"line":82,"column":54}},"54":{"start":{"line":85,"column":21},"end":{"line":92,"column":1}},"55":{"start":{"line":86,"column":4},"end":{"line":91,"column":5}},"56":{"start":{"line":87,"column":8},"end":{"line":87,"column":23}},"57":{"start":{"line":90,"column":8},"end":{"line":90,"column":61}},"58":{"start":{"line":93,"column":15},"end":{"line":93,"column":90}},"59":{"start":{"line":94,"column":0},"end":{"line":94,"column":49}},"60":{"start":{"line":95,"column":0},"end":{"line":99,"column":3}},"61":{"start":{"line":100,"column":19},"end":{"line":143,"column":1}},"62":{"start":{"line":101,"column":4},"end":{"line":142,"column":7}},"63":{"start":{"line":102,"column":8},"end":{"line":102,"column":49}},"64":{"start":{"line":103,"column":8},"end":{"line":141,"column":9}},"65":{"start":{"line":104,"column":27},"end":{"line":104,"column":53}},"66":{"start":{"line":105,"column":28},"end":{"line":105,"column":30}},"67":{"start":{"line":106,"column":12},"end":{"line":112,"column":15}},"68":{"start":{"line":107,"column":16},"end":{"line":111,"column":17}},"69":{"start":{"line":108,"column":20},"end":{"line":108,"column":43}},"70":{"start":{"line":110,"column":20},"end":{"line":110,"column":43}},"71":{"start":{"line":113,"column":25},"end":{"line":117,"column":56}},"72":{"start":{"line":118,"column":25},"end":{"line":118,"column":67}},"73":{"start":{"line":119,"column":12},"end":{"line":120,"column":50}},"74":{"start":{"line":120,"column":16},"end":{"line":120,"column":50}},"75":{"start":{"line":121,"column":12},"end":{"line":121,"column":31}},"76":{"start":{"line":122,"column":12},"end":{"line":122,"column":34}},"77":{"start":{"line":123,"column":30},"end":{"line":123,"column":45}},"78":{"start":{"line":124,"column":12},"end":{"line":124,"column":30}},"79":{"start":{"line":125,"column":12},"end":{"line":125,"column":74}},"80":{"start":{"line":126,"column":26},"end":{"line":126,"column":67}},"81":{"start":{"line":128,"column":32},"end":{"line":128,"column":69}},"82":{"start":{"line":129,"column":12},"end":{"line":132,"column":13}},"83":{"start":{"line":130,"column":31},"end":{"line":130,"column":80}},"84":{"start":{"line":130,"column":63},"end":{"line":130,"column":79}},"85":{"start":{"line":131,"column":16},"end":{"line":131,"column":63}},"86":{"start":{"line":133,"column":12},"end":{"line":135,"column":86}},"87":{"start":{"line":138,"column":12},"end":{"line":138,"column":53}},"88":{"start":{"line":139,"column":12},"end":{"line":139,"column":29}},"89":{"start":{"line":140,"column":12},"end":{"line":140,"column":78}},"90":{"start":{"line":144,"column":0},"end":{"line":144,"column":32}},"91":{"start":{"line":145,"column":19},"end":{"line":172,"column":1}},"92":{"start":{"line":146,"column":4},"end":{"line":171,"column":7}},"93":{"start":{"line":147,"column":8},"end":{"line":170,"column":9}},"94":{"start":{"line":148,"column":29},"end":{"line":148,"column":39}},"95":{"start":{"line":149,"column":28},"end":{"line":149,"column":30}},"96":{"start":{"line":150,"column":12},"end":{"line":156,"column":15}},"97":{"start":{"line":151,"column":16},"end":{"line":155,"column":17}},"98":{"start":{"line":152,"column":20},"end":{"line":152,"column":43}},"99":{"start":{"line":154,"column":20},"end":{"line":154,"column":43}},"100":{"start":{"line":157,"column":32},"end":{"line":157,"column":100}},"101":{"start":{"line":158,"column":24},"end":{"line":158,"column":98}},"102":{"start":{"line":159,"column":12},"end":{"line":165,"column":15}},"103":{"start":{"line":168,"column":12},"end":{"line":168,"column":58}},"104":{"start":{"line":169,"column":12},"end":{"line":169,"column":78}},"105":{"start":{"line":173,"column":0},"end":{"line":173,"column":32}},"106":{"start":{"line":174,"column":19},"end":{"line":187,"column":1}},"107":{"start":{"line":175,"column":4},"end":{"line":186,"column":7}},"108":{"start":{"line":176,"column":8},"end":{"line":185,"column":9}},"109":{"start":{"line":177,"column":29},"end":{"line":177,"column":39}},"110":{"start":{"line":178,"column":12},"end":{"line":178,"column":60}},"111":{"start":{"line":179,"column":24},"end":{"line":179,"column":65}},"112":{"start":{"line":180,"column":12},"end":{"line":180,"column":80}},"113":{"start":{"line":183,"column":12},"end":{"line":183,"column":56}},"114":{"start":{"line":184,"column":12},"end":{"line":184,"column":78}},"115":{"start":{"line":188,"column":0},"end":{"line":188,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":23,"column":17},"end":{"line":23,"column":18}},"loc":{"start":{"line":23,"column":37},"end":{"line":33,"column":1}},"line":23},"9":{"name":"(anonymous_9)","decl":{"start":{"line":24,"column":43},"end":{"line":24,"column":44}},"loc":{"start":{"line":24,"column":56},"end":{"line":32,"column":5}},"line":24},"10":{"name":"(anonymous_10)","decl":{"start":{"line":35,"column":16},"end":{"line":35,"column":17}},"loc":{"start":{"line":35,"column":36},"end":{"line":51,"column":1}},"line":35},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":43},"end":{"line":36,"column":44}},"loc":{"start":{"line":36,"column":56},"end":{"line":50,"column":5}},"line":36},"12":{"name":"(anonymous_12)","decl":{"start":{"line":60,"column":30},"end":{"line":60,"column":31}},"loc":{"start":{"line":60,"column":48},"end":{"line":74,"column":2}},"line":60},"13":{"name":"(anonymous_13)","decl":{"start":{"line":60,"column":82},"end":{"line":60,"column":83}},"loc":{"start":{"line":60,"column":95},"end":{"line":74,"column":1}},"line":60},"14":{"name":"(anonymous_14)","decl":{"start":{"line":76,"column":17},"end":{"line":76,"column":18}},"loc":{"start":{"line":76,"column":36},"end":{"line":78,"column":5}},"line":76},"15":{"name":"(anonymous_15)","decl":{"start":{"line":79,"column":14},"end":{"line":79,"column":15}},"loc":{"start":{"line":79,"column":33},"end":{"line":83,"column":5}},"line":79},"16":{"name":"(anonymous_16)","decl":{"start":{"line":85,"column":21},"end":{"line":85,"column":22}},"loc":{"start":{"line":85,"column":40},"end":{"line":92,"column":1}},"line":85},"17":{"name":"(anonymous_17)","decl":{"start":{"line":100,"column":19},"end":{"line":100,"column":20}},"loc":{"start":{"line":100,"column":39},"end":{"line":143,"column":1}},"line":100},"18":{"name":"(anonymous_18)","decl":{"start":{"line":101,"column":43},"end":{"line":101,"column":44}},"loc":{"start":{"line":101,"column":56},"end":{"line":142,"column":5}},"line":101},"19":{"name":"(anonymous_19)","decl":{"start":{"line":106,"column":109},"end":{"line":106,"column":110}},"loc":{"start":{"line":106,"column":134},"end":{"line":112,"column":13}},"line":106},"20":{"name":"(anonymous_20)","decl":{"start":{"line":130,"column":47},"end":{"line":130,"column":48}},"loc":{"start":{"line":130,"column":63},"end":{"line":130,"column":79}},"line":130},"21":{"name":"(anonymous_21)","decl":{"start":{"line":145,"column":19},"end":{"line":145,"column":20}},"loc":{"start":{"line":145,"column":39},"end":{"line":172,"column":1}},"line":145},"22":{"name":"(anonymous_22)","decl":{"start":{"line":146,"column":43},"end":{"line":146,"column":44}},"loc":{"start":{"line":146,"column":56},"end":{"line":171,"column":5}},"line":146},"23":{"name":"(anonymous_23)","decl":{"start":{"line":150,"column":109},"end":{"line":150,"column":110}},"loc":{"start":{"line":150,"column":134},"end":{"line":156,"column":13}},"line":150},"24":{"name":"(anonymous_24)","decl":{"start":{"line":174,"column":19},"end":{"line":174,"column":20}},"loc":{"start":{"line":174,"column":39},"end":{"line":187,"column":1}},"line":174},"25":{"name":"(anonymous_25)","decl":{"start":{"line":175,"column":43},"end":{"line":175,"column":44}},"loc":{"start":{"line":175,"column":56},"end":{"line":186,"column":5}},"line":175}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":40,"column":12},"end":{"line":41,"column":50}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":41,"column":50}},{"start":{"line":40,"column":12},"end":{"line":41,"column":50}}],"line":40},"9":{"loc":{"start":{"line":86,"column":4},"end":{"line":91,"column":5}},"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":91,"column":5}},{"start":{"line":86,"column":4},"end":{"line":91,"column":5}}],"line":86},"10":{"loc":{"start":{"line":107,"column":16},"end":{"line":111,"column":17}},"type":"if","locations":[{"start":{"line":107,"column":16},"end":{"line":111,"column":17}},{"start":{"line":107,"column":16},"end":{"line":111,"column":17}}],"line":107},"11":{"loc":{"start":{"line":119,"column":12},"end":{"line":120,"column":50}},"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":120,"column":50}},{"start":{"line":119,"column":12},"end":{"line":120,"column":50}}],"line":119},"12":{"loc":{"start":{"line":129,"column":12},"end":{"line":132,"column":13}},"type":"if","locations":[{"start":{"line":129,"column":12},"end":{"line":132,"column":13}},{"start":{"line":129,"column":12},"end":{"line":132,"column":13}}],"line":129},"13":{"loc":{"start":{"line":151,"column":16},"end":{"line":155,"column":17}},"type":"if","locations":[{"start":{"line":151,"column":16},"end":{"line":155,"column":17}},{"start":{"line":151,"column":16},"end":{"line":155,"column":17}}],"line":151}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":2,"11":1,"12":1,"13":4,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":0,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":1,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":1,"60":1,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":1,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":0,"6":2,"7":4,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1,1],"6":[2,2],"7":[4,4],"8":[0,0],"9":[1,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/blogs/controllers/blogControllers.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/blogs/controllers/blogControllers.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,uFAAyD;AACzD,4DAAoC;AACpC,oDAA4B;AAC5B,2CAA8C;AAC9C,+FAAkE;AAClE,mEAMwC;AACxC,0EAG+C;AAExC,MAAM,QAAQ,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACjE,IAAI,CAAC;YACH,MAAM,KAAK,GAAG,MAAM,IAAA,4BAAW,GAAE,CAAC;YAClC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QACtE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AAPW,QAAA,QAAQ,YAOnB;AAEK,MAAM,OAAO,GAAG,UAAgB,GAAY,EAAE,GAAa;;QAChE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,MAAM,UAAU,GAAG,MAAM,IAAA,8BAAa,EAAC,IAAI,CAAC,CAAC;YAC7C,IAAI,CAAC,UAAU;gBAAE,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;YACnD,MAAM,IAAI,GAAG,MAAM,IAAA,2BAAU,EAAC,IAAI,CAAC,CAAC;YACpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QACrE,CAAC;QAAC,OAAO,GAAQ,EAAE,CAAC;YAClB,GAAG;iBACA,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;CAAA,CAAC;AAZW,QAAA,OAAO,WAYlB;AAEF,MAAM,WAAW,GAAG,oBAAU,CAAC,eAAe,CAAC;IAC7C,OAAO,EAAE,OAAO;IAChB,IAAI,EAAE;QACJ,IAAI,EAAE,oCAAoC;QAC1C,IAAI,EAAE,qBAAqB;KAC5B;CACF,CAAC,CAAC;AAEH,MAAM,qBAAqB,GAAG,CAAO,MAAgB,EAAE,IAAY,EAAE,EAAE;IACrE,IAAI,CAAC;QACH,MAAM,WAAW,GAAG;YAClB,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;YAC5B,EAAE,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACzB,OAAO,EAAE,qCAAqC;YAC9C,IAAI,EAAE,sGAAsG,IAAI,OAAO;SACxH,CAAC;QACF,MAAM,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACxC,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;IACtD,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;IAC5D,CAAC;AACH,CAAC,CAAA,CAAC;AAEF,MAAM,aAAa,GAAG,gBAAM,CAAC,WAAW,CAAC;IACvC,WAAW,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;QAC7B,EAAE,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACnB,CAAC;IACD,QAAQ,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;QAC1B,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACxC,EAAE,CAAC,IAAI,EAAE,GAAG,SAAS,IAAI,IAAI,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;IAChD,CAAC;CACF,CAAC,CAAC;AAEH,MAAM,YAAY,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE;IACrC,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAAC;QACtC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACjB,CAAC;SAAM,CAAC;QACN,EAAE,CAAC,IAAI,KAAK,CAAC,8BAA8B,CAAC,EAAE,KAAK,CAAC,CAAC;IACvD,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,MAAM,GAAG,IAAA,gBAAM,EAAC,EAAE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,YAAY,EAAE,CAAC,CAAC;AAE/D,QAAA,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAEtD,eAAU,CAAC,MAAM,CAAC;IAChB,UAAU,EAAE,WAAW;IACvB,OAAO,EAAE,iBAAiB;IAC1B,UAAU,EAAE,6BAA6B;CAC1C,CAAC,CAAC;AAEI,MAAM,UAAU,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACnE,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,IAAI,CAAC;YACH,MAAM,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;YAC1C,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,MAAM,eAAU,CAAC,QAAQ,CAAC,MAAM,CAC9B,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAC1B,EAAE,SAAS,EAAE,cAAc,EAAE,EAC7B,UAAU,KAAU,EAAE,MAAM;gBAC1B,IAAI,KAAK;oBAAE,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC;qBAC7B,CAAC;oBACJ,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC;gBACzB,CAAC;YACH,CAAC,CACF,CAAC;YAEF,MAAM,IAAI,GAAQ,IAAI,oBAAI,iCACrB,GAAG,CAAC,IAAI,KACX,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK;qBACjB,UAAU,CAAC,cAAc,EAAE,EAAE,CAAC;qBAC9B,KAAK,CAAC,GAAG,CAAC;qBACV,IAAI,CAAC,GAAG,CAAC;qBACT,WAAW,EAAE,EAChB,KAAK,EAAE,SAAS,IAChB,CAAC;YAEH,MAAM,IAAI,GAAG,MAAM,IAAA,2BAAU,EAAC,EAAE,CAAC,CAAC;YAClC,IAAI,CAAC,IAAI;gBAAE,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,MAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;YAClC,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,MAAM,IAAA,8BAAa,EAAC,IAAI,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;YACxC,MAAM,KAAK,GAAG,MAAM,IAAA,4BAAW,GAAE,CAAC;YAElC,qCAAqC;YACrC,MAAM,WAAW,GAAG,MAAM,wBAAS,CAAC,IAAI,EAAE,CAAC;YAC3C,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC3B,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBACjE,MAAM,qBAAqB,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACjD,CAAC;YACD,GAAG;iBACA,MAAM,CAAC,GAAG,CAAC;iBACX,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1E,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;YACzC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AAjDW,QAAA,UAAU,cAiDrB;AAEK,MAAM,UAAU,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACnE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,MAAM,eAAU,CAAC,QAAQ,CAAC,MAAM,CAC9B,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAC1B,EAAE,SAAS,EAAE,cAAc,EAAE,EAC7B,UAAU,KAAU,EAAE,MAAM;gBAC1B,IAAI,KAAK;oBAAE,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC;qBAC7B,CAAC;oBACJ,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC;gBACzB,CAAC;YACH,CAAC,CACF,CAAC;YAEF,MAAM,WAAW,GAAG,MAAM,IAAA,8BAAa,EAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YAEnE,MAAM,GAAG,GAAG,wDAAwD,WAAW,CAAC,IAAI,EAAE,CAAC;YACvF,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACnB,EAAE,EAAE,IAAI;gBACR,OAAO,EAAE,SAAS;gBAClB,IAAI,EAAE,WAAW;gBACjB,GAAG;gBACH,IAAI,EAAE,WAAW,CAAC,IAAI;aACvB,CAAC,CAAC;QACL,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,GAAG,CAAC,CAAC;YAC9C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AA7BW,QAAA,UAAU,cA6BrB;AAEK,MAAM,UAAU,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACnE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,MAAM,IAAA,8BAAa,EAAC,IAAI,CAAC,CAAC;YAC1B,IAAI,KAAK,GAAG,MAAM,IAAA,4BAAW,GAAE,CAAC;YAChC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QACtE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;YAC5C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AAVW,QAAA,UAAU,cAUrB","sourcesContent":["import { Request, Response } from \"express\";\r\nimport Blog from \"./../../../database/models/blogsModel\";\r\nimport nodemailer from \"nodemailer\";\r\nimport multer from \"multer\";\r\nimport { v2 as cloudinary } from \"cloudinary\";\r\nimport Subscribe from \"./../../../database/models/subscribeModel\";\r\nimport {\r\n  deleteOneBlog,\r\n  getAllBlogs,\r\n  getOneBlog,\r\n  getSampleBlog,\r\n  updateOneBlog,\r\n} from \"./../repository/blogRepository\";\r\nimport {\r\n  getOneUser,\r\n  updateOneuser,\r\n} from \"../../users/repository/userRepository\";\r\n\r\nexport const getBlogs = async function (req: Request, res: Response) {\r\n  try {\r\n    const blogs = await getAllBlogs();\r\n    res.status(200).json({ ok: true, message: \"success\", data: blogs });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const getBlog = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug } = req.params;\r\n    const sampleBlog = await getSampleBlog(slug);\r\n    if (!sampleBlog) throw new Error(\"Blog not Found\");\r\n    const blog = await getOneBlog(slug);\r\n    res.status(200).json({ ok: true, message: \"success\", data: blog });\r\n  } catch (err: any) {\r\n    res\r\n      .status(500)\r\n      .json({ ok: false, message: \"fail\", errors: { message: err.message } });\r\n  }\r\n};\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  service: \"gmail\",\r\n  auth: {\r\n    user: \"dushimimanafabricerwanda@gmail.com\",\r\n    pass: \"zenz lbbo eorl gltg\",\r\n  },\r\n});\r\n\r\nconst sendSubscriptionEmail = async (emails: string[], slug: string) => {\r\n  try {\r\n    const mailOptions = {\r\n      from: process.env.MAIL_EMAIL,\r\n      to: `${emails.join(\",\")}`,\r\n      subject: \"A new article was added to the site\",\r\n      html: `<h3>Click this link to view the article:https://fabrice-dush.github.io/My-Brand-Frontend/blog.html#${slug}</h3>`,\r\n    };\r\n    await transporter.sendMail(mailOptions);\r\n    console.log(\"Subscription email sent successfully\");\r\n  } catch (error) {\r\n    console.error(\"Error sending subscription email:\", error);\r\n  }\r\n};\r\n\r\nconst multerStorage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"img/\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    const FILE_NAME = file.originalname.split(\".\")[0];\r\n    const ext = file.mimetype.split(\"/\")[1];\r\n    cb(null, `${FILE_NAME}-${Date.now()}.${ext}`);\r\n  },\r\n});\r\n\r\nconst multerFilter = (req, file, cb) => {\r\n  if (file.mimetype.startsWith(\"image\")) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error(\"Only image files are allowed\"), false);\r\n  }\r\n};\r\n\r\nconst upload = multer({ storage: multerStorage, fileFilter: multerFilter });\r\n\r\nexport const uploadUserPhoto = upload.single(\"image\");\r\n\r\ncloudinary.config({\r\n  cloud_name: \"drefu58oe\",\r\n  api_key: \"978552827499531\",\r\n  api_secret: \"cR6cup_MaLQi0X3t00R4F0D3p3Y\",\r\n});\r\n\r\nexport const createBlog = async function (req: Request, res: Response) {\r\n  console.log(\"We're getting here 😂😂😂\");\r\n  try {\r\n    const { id } = req.body.authenticatedUser;\r\n    let imagePath = \"\";\r\n    await cloudinary.uploader.upload(\r\n      `img/${req.file.filename}`,\r\n      { public_id: \"olympic_flag\" },\r\n      function (error: any, result) {\r\n        if (error) throw new Error(error);\r\n        else {\r\n          imagePath = result.url;\r\n        }\r\n      }\r\n    );\r\n\r\n    const blog: any = new Blog({\r\n      ...req.body,\r\n      slug: req.body.title\r\n        .replaceAll(/[*./:()?\\n]/g, \"\")\r\n        .split(\" \")\r\n        .join(\"_\")\r\n        .toLowerCase(),\r\n      image: imagePath,\r\n    });\r\n\r\n    const user = await getOneUser(id);\r\n    if (!user) throw new Error(\"User not found\");\r\n    blog.author = user;\r\n    user.blogs.push(blog);\r\n    const userBlogs = [...user.blogs];\r\n    await blog.save();\r\n    await updateOneuser(user.id, userBlogs);\r\n    const blogs = await getAllBlogs();\r\n\r\n    //? Sending email to subscribed users\r\n    const subscribers = await Subscribe.find();\r\n    if (subscribers.length > 0) {\r\n      const emails = subscribers.map((subscriber) => subscriber.email);\r\n      await sendSubscriptionEmail(emails, blog.slug);\r\n    }\r\n    res\r\n      .status(201)\r\n      .json({ ok: true, message: \"success\", data: blogs, slug: blog.slug });\r\n  } catch (err) {\r\n    console.log(\"Error creating a new blog\");\r\n    console.log(err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const updateBlog = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug } = req.params;\r\n    let imagePath = \"\";\r\n    await cloudinary.uploader.upload(\r\n      `img/${req.file.filename}`,\r\n      { public_id: \"olympic_flag\" },\r\n      function (error: any, result) {\r\n        if (error) throw new Error(error);\r\n        else {\r\n          imagePath = result.url;\r\n        }\r\n      }\r\n    );\r\n\r\n    const updatedBlog = await updateOneBlog(slug, req.body, imagePath);\r\n\r\n    const url = `https://my-brand-backend-n8rt.onrender.com/api/blogs/${updatedBlog.slug}`;\r\n    res.status(200).json({\r\n      ok: true,\r\n      message: \"success\",\r\n      data: updatedBlog,\r\n      url,\r\n      slug: updatedBlog.slug,\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Error updating a blog: \", err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const deleteBlog = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug } = req.params;\r\n    await deleteOneBlog(slug);\r\n    let blogs = await getAllBlogs();\r\n    res.status(200).json({ ok: true, message: \"success\", data: blogs });\r\n  } catch (err) {\r\n    console.error(\"Error deleting blog: \", err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"063b16fa67082ff384e19053f73088528465431a"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\commentRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\commentRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":28},"end":{"line":8,"column":88}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":62}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":143}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":107}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/commentRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/commentRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAE9B,yDAIkC;AAClC,yFAG2D;AAE3D,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAErD,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,yBAAY,EAAE,0BAAa,EAAE,6BAAgB,EAAE,iCAAa,CAAC,CAAC;AAEpF,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,yBAAY,EAAE,0BAAa,EAAE,iCAAa,CAAC,CAAC;AAE7D,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\n\r\nimport {\r\n  authenticate,\r\n  authorizeComment,\r\n  isVerifiedFun,\r\n} from \"../middleware/middleware\";\r\nimport {\r\n  createComment,\r\n  deleteComment,\r\n} from \"../modules/comments/controllers/commentController\";\r\n\r\nconst router = express.Router({ mergeParams: true });\r\n\r\nrouter.delete(\"/:id\", authenticate, isVerifiedFun, authorizeComment, deleteComment);\r\n\r\nrouter.post(\"/\", authenticate, isVerifiedFun, createComment);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"309f29b2d7ff14ff9908541741cd5ac4b54c5ed7"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\comments\\controllers\\commentController.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\comments\\controllers\\commentController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":92}},"17":{"start":{"line":17,"column":25},"end":{"line":17,"column":73}},"18":{"start":{"line":18,"column":28},"end":{"line":18,"column":70}},"19":{"start":{"line":19,"column":22},"end":{"line":37,"column":1}},"20":{"start":{"line":20,"column":4},"end":{"line":36,"column":7}},"21":{"start":{"line":21,"column":8},"end":{"line":35,"column":9}},"22":{"start":{"line":22,"column":29},"end":{"line":22,"column":39}},"23":{"start":{"line":23,"column":25},"end":{"line":23,"column":69}},"24":{"start":{"line":24,"column":31},"end":{"line":24,"column":86}},"25":{"start":{"line":25,"column":12},"end":{"line":25,"column":59}},"26":{"start":{"line":26,"column":12},"end":{"line":26,"column":43}},"27":{"start":{"line":27,"column":12},"end":{"line":27,"column":36}},"28":{"start":{"line":28,"column":12},"end":{"line":28,"column":30}},"29":{"start":{"line":29,"column":30},"end":{"line":29,"column":78}},"30":{"start":{"line":30,"column":12},"end":{"line":30,"column":84}},"31":{"start":{"line":33,"column":12},"end":{"line":33,"column":57}},"32":{"start":{"line":34,"column":12},"end":{"line":34,"column":78}},"33":{"start":{"line":38,"column":0},"end":{"line":38,"column":38}},"34":{"start":{"line":39,"column":22},"end":{"line":53,"column":1}},"35":{"start":{"line":40,"column":4},"end":{"line":52,"column":7}},"36":{"start":{"line":41,"column":8},"end":{"line":51,"column":9}},"37":{"start":{"line":42,"column":33},"end":{"line":42,"column":43}},"38":{"start":{"line":43,"column":32},"end":{"line":43,"column":86}},"39":{"start":{"line":44,"column":12},"end":{"line":44,"column":65}},"40":{"start":{"line":45,"column":30},"end":{"line":45,"column":85}},"41":{"start":{"line":46,"column":12},"end":{"line":46,"column":84}},"42":{"start":{"line":49,"column":12},"end":{"line":49,"column":57}},"43":{"start":{"line":50,"column":12},"end":{"line":50,"column":78}},"44":{"start":{"line":54,"column":0},"end":{"line":54,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":22},"end":{"line":19,"column":23}},"loc":{"start":{"line":19,"column":42},"end":{"line":37,"column":1}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":43},"end":{"line":20,"column":44}},"loc":{"start":{"line":20,"column":56},"end":{"line":36,"column":5}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":22},"end":{"line":39,"column":23}},"loc":{"start":{"line":39,"column":42},"end":{"line":53,"column":1}},"line":39},"11":{"name":"(anonymous_11)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":52,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/comments/controllers/commentController.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/comments/controllers/commentController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,6FAA+D;AAC/D,0EAI+C;AAC/C,uEAAoE;AAE7D,MAAM,aAAa,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACtE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,MAAM,IAAI,GAAG,MAAM,IAAA,2BAAU,EAAC,IAAI,CAAC,CAAC;YAEpC,MAAM,UAAU,GAAQ,IAAI,uBAAO,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YAChE,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;YAE/C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAE/B,MAAM,UAAU,CAAC,IAAI,EAAE,CAAC;YACxB,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;YAElB,MAAM,SAAS,GAAG,MAAM,IAAA,4BAAW,EAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAE7C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;QAC1E,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;YAC7C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AApBW,QAAA,aAAa,iBAoBxB;AAEK,MAAM,aAAa,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACtE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAChC,MAAM,WAAW,GAAG,MAAM,IAAA,iCAAgB,EAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YAErD,MAAM,IAAA,qCAAiB,EAAC,EAAE,CAAC,CAAC;YAE5B,MAAM,SAAS,GAAG,MAAM,IAAA,4BAAW,EAAC,WAAW,CAAC,EAAE,CAAC,CAAC;YAEpD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;QAC1E,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;YAC7C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AAdW,QAAA,aAAa,iBAcxB","sourcesContent":["import { Request, Response } from \"express\";\r\nimport Comment from \"./../../../database/models/commentsModel\";\r\nimport {\r\n  getBlogById,\r\n  getOneBlog,\r\n  updateBlogBySlug,\r\n} from \"../../blogs/repository/blogRepository\";\r\nimport { deleteCommentById } from \"../repository/commentRepository\";\r\n\r\nexport const createComment = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug } = req.params;\r\n    const blog = await getOneBlog(slug);\r\n\r\n    const newComment: any = new Comment({ text: req.body.comment });\r\n    newComment.author = req.body.authenticatedUser;\r\n\r\n    blog.comments.push(newComment);\r\n\r\n    await newComment.save();\r\n    await blog.save();\r\n\r\n    const foundBlog = await getBlogById(blog.id);\r\n\r\n    res.status(201).json({ ok: true, message: \"success\", data: foundBlog });\r\n  } catch (err) {\r\n    console.log(\"Error creating comment: \", err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const deleteComment = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug, id } = req.params;\r\n    const updatedBlog = await updateBlogBySlug(slug, id);\r\n\r\n    await deleteCommentById(id);\r\n\r\n    const foundBlog = await getBlogById(updatedBlog.id);\r\n\r\n    res.status(200).json({ ok: true, message: \"success\", data: foundBlog });\r\n  } catch (err) {\r\n    console.log(\"Error deleting comment: \", err);\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"651719f6c07b406071def67bcd7b6447b8171a69"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\subscribeRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\subscribeRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":31},"end":{"line":8,"column":97}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":13,"column":52}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":120}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/subscribeRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/subscribeRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAE9B,yDAAwE;AACxE,kGAA+H;AAC/H,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM;KACH,KAAK,CAAC,GAAG,CAAC;KACV,GAAG,CAAC,yBAAY,EAAE,2BAAc,EAAE,qCAAc,CAAC;KACjD,IAAI,CAAC,wCAAiB,CAAC,CAAC;AAE3B,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,yBAAY,EAAE,2BAAc,EAAE,wCAAiB,CAAC,CAAC;AAEvE,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\n\r\nimport { authenticate, authorizeUsers } from \"../middleware/middleware\";\r\nimport { createSubscribers, deleteSubscribers, getSubscribers } from \"../modules/subscribers/controllers/subscriberController\";\r\nconst router = express.Router();\r\n\r\nrouter\r\n  .route(\"/\")\r\n  .get(authenticate, authorizeUsers, getSubscribers)\r\n  .post(createSubscribers);\r\n\r\nrouter.delete(\"/:id\", authenticate, authorizeUsers, deleteSubscribers);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e1608484b650a0a2fe15d8f688a6e58bcdc9b78f"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\subscribers\\controllers\\subscriberController.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\subscribers\\controllers\\subscriberController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":88}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":59}},"17":{"start":{"line":17,"column":31},"end":{"line":17,"column":78}},"18":{"start":{"line":18,"column":20},"end":{"line":24,"column":2}},"19":{"start":{"line":25,"column":30},"end":{"line":44,"column":2}},"20":{"start":{"line":25,"column":41},"end":{"line":44,"column":2}},"21":{"start":{"line":26,"column":4},"end":{"line":43,"column":5}},"22":{"start":{"line":27,"column":28},"end":{"line":37,"column":9}},"23":{"start":{"line":38,"column":21},"end":{"line":38,"column":60}},"24":{"start":{"line":39,"column":8},"end":{"line":39,"column":60}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":66}},"26":{"start":{"line":45,"column":23},"end":{"line":56,"column":1}},"27":{"start":{"line":46,"column":4},"end":{"line":55,"column":7}},"28":{"start":{"line":47,"column":8},"end":{"line":54,"column":9}},"29":{"start":{"line":48,"column":32},"end":{"line":48,"column":85}},"30":{"start":{"line":49,"column":12},"end":{"line":49,"column":47}},"31":{"start":{"line":50,"column":12},"end":{"line":50,"column":86}},"32":{"start":{"line":53,"column":12},"end":{"line":53,"column":78}},"33":{"start":{"line":57,"column":0},"end":{"line":57,"column":40}},"34":{"start":{"line":58,"column":26},"end":{"line":72,"column":1}},"35":{"start":{"line":59,"column":4},"end":{"line":71,"column":7}},"36":{"start":{"line":60,"column":8},"end":{"line":70,"column":9}},"37":{"start":{"line":61,"column":31},"end":{"line":61,"column":113}},"38":{"start":{"line":62,"column":12},"end":{"line":62,"column":65}},"39":{"start":{"line":63,"column":32},"end":{"line":63,"column":85}},"40":{"start":{"line":64,"column":12},"end":{"line":64,"column":86}},"41":{"start":{"line":67,"column":12},"end":{"line":67,"column":54}},"42":{"start":{"line":68,"column":12},"end":{"line":68,"column":51}},"43":{"start":{"line":69,"column":12},"end":{"line":69,"column":78}},"44":{"start":{"line":73,"column":0},"end":{"line":73,"column":46}},"45":{"start":{"line":74,"column":26},"end":{"line":86,"column":1}},"46":{"start":{"line":75,"column":4},"end":{"line":85,"column":7}},"47":{"start":{"line":76,"column":8},"end":{"line":84,"column":9}},"48":{"start":{"line":77,"column":27},"end":{"line":77,"column":37}},"49":{"start":{"line":78,"column":12},"end":{"line":78,"column":71}},"50":{"start":{"line":79,"column":32},"end":{"line":79,"column":85}},"51":{"start":{"line":80,"column":12},"end":{"line":80,"column":86}},"52":{"start":{"line":83,"column":12},"end":{"line":83,"column":78}},"53":{"start":{"line":87,"column":0},"end":{"line":87,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":25,"column":30},"end":{"line":25,"column":31}},"loc":{"start":{"line":25,"column":41},"end":{"line":44,"column":2}},"line":25},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":75},"end":{"line":25,"column":76}},"loc":{"start":{"line":25,"column":88},"end":{"line":44,"column":1}},"line":25},"10":{"name":"(anonymous_10)","decl":{"start":{"line":45,"column":23},"end":{"line":45,"column":24}},"loc":{"start":{"line":45,"column":43},"end":{"line":56,"column":1}},"line":45},"11":{"name":"(anonymous_11)","decl":{"start":{"line":46,"column":43},"end":{"line":46,"column":44}},"loc":{"start":{"line":46,"column":56},"end":{"line":55,"column":5}},"line":46},"12":{"name":"(anonymous_12)","decl":{"start":{"line":58,"column":26},"end":{"line":58,"column":27}},"loc":{"start":{"line":58,"column":46},"end":{"line":72,"column":1}},"line":58},"13":{"name":"(anonymous_13)","decl":{"start":{"line":59,"column":43},"end":{"line":59,"column":44}},"loc":{"start":{"line":59,"column":56},"end":{"line":71,"column":5}},"line":59},"14":{"name":"(anonymous_14)","decl":{"start":{"line":74,"column":26},"end":{"line":74,"column":27}},"loc":{"start":{"line":74,"column":46},"end":{"line":86,"column":1}},"line":74},"15":{"name":"(anonymous_15)","decl":{"start":{"line":75,"column":43},"end":{"line":75,"column":44}},"loc":{"start":{"line":75,"column":56},"end":{"line":85,"column":5}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/subscribers/controllers/subscriberController.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/subscribers/controllers/subscriberController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport nodemailer from \"nodemailer\";\r\nimport {\r\n  getAllSubscribers,\r\n  createNewSubscriber,\r\n  deleteSubscriberById,\r\n} from \"./../repository/subscriberRepository\";\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  service: \"gmail\",\r\n  auth: {\r\n    user: \"dushimimanafabricerwanda@gmail.com\",\r\n    pass: \"zenz lbbo eorl gltg\",\r\n  },\r\n});\r\n\r\nconst sendSubscriptionEmail = async (email: string) => {\r\n  try {\r\n    const mailOptions = {\r\n      from: process.env.MAIL_EMAIL,\r\n      to: email,\r\n      subject: \"Subscription Confirmation\",\r\n      html: `<p>Thank you for subscribing to our site!</p>\r\n      <p>You have successfully subscribed to receive updates.\r\n      You will receive updates everytime we add new article to our site.\r\n      </p>\r\n      <h3>Click this link to visit our site:https://fabrice-dush.github.io/My-Brand-Frontend/blogs.html</h3>\r\n      `,\r\n    };\r\n    const sent = await transporter.sendMail(mailOptions);\r\n    console.log(\"Subscription email sent successfully\");\r\n  } catch (error) {\r\n    console.error(\"Error sending subscription email:\", error);\r\n  }\r\n};\r\n\r\nexport const getSubscribers = async function (req: Request, res: Response) {\r\n  try {\r\n    const subscribers = await getAllSubscribers();\r\n    console.log(\"Subs: \", subscribers);\r\n    res.status(200).json({ ok: true, message: \"success\", data: subscribers });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const createSubscribers = async function (req: Request, res: Response) {\r\n  try {\r\n    const subscriber = await createNewSubscriber({ ...req.body });\r\n\r\n    await sendSubscriptionEmail(subscriber.email.trim());\r\n    const subscribers = await getAllSubscribers();\r\n\r\n    res.status(201).json({ ok: true, message: \"success\", data: subscribers });\r\n  } catch (err: any) {\r\n    console.log(\"Error in subscriber: \", err);\r\n    err.message = \"You already subscribed\";\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n\r\nexport const deleteSubscribers = async function (req: Request, res: Response) {\r\n  try {\r\n    const { id } = req.params;\r\n    await deleteSubscriberById(id);\r\n    const subscribers = await getAllSubscribers();\r\n    res.status(200).json({ ok: true, message: \"success\", data: subscribers });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a5c2872e167752b974a506e38e3e226b69e36bb5"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\likeRoutes.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\routes\\likeRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":62}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":56}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":79}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":101}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/likeRoutes.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/routes/likeRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AACrD,yDAAuE;AACvE,gFAAyE;AACzE,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,yBAAY,EAAE,0BAAa,EAAE,2BAAU,CAAC,CAAC;AAE1D,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nconst router = express.Router({ mergeParams: true });\r\nimport { authenticate, isVerifiedFun } from \"../middleware/middleware\";\r\nimport { createLike } from \"../modules/likes/controllers/likeController\";\r\nrouter.post(\"/\", authenticate, isVerifiedFun, createLike);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9ca58fc0132cafac0f99b3e59dbe946d6ed985fd"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\likes\\controllers\\likeController.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\likes\\controllers\\likeController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":86}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":86}},"18":{"start":{"line":18,"column":19},"end":{"line":52,"column":1}},"19":{"start":{"line":19,"column":4},"end":{"line":51,"column":7}},"20":{"start":{"line":20,"column":8},"end":{"line":50,"column":9}},"21":{"start":{"line":21,"column":29},"end":{"line":21,"column":39}},"22":{"start":{"line":22,"column":25},"end":{"line":25,"column":14}},"23":{"start":{"line":26,"column":30},"end":{"line":26,"column":128}},"24":{"start":{"line":26,"column":56},"end":{"line":26,"column":127}},"25":{"start":{"line":28,"column":12},"end":{"line":40,"column":13}},"26":{"start":{"line":29,"column":16},"end":{"line":29,"column":155}},"27":{"start":{"line":30,"column":36},"end":{"line":30,"column":94}},"28":{"start":{"line":33,"column":29},"end":{"line":33,"column":71}},"29":{"start":{"line":34,"column":16},"end":{"line":34,"column":56}},"30":{"start":{"line":35,"column":16},"end":{"line":35,"column":33}},"31":{"start":{"line":36,"column":16},"end":{"line":36,"column":38}},"32":{"start":{"line":37,"column":16},"end":{"line":37,"column":34}},"33":{"start":{"line":38,"column":16},"end":{"line":38,"column":34}},"34":{"start":{"line":39,"column":16},"end":{"line":39,"column":34}},"35":{"start":{"line":41,"column":29},"end":{"line":44,"column":73}},"36":{"start":{"line":45,"column":12},"end":{"line":45,"column":34}},"37":{"start":{"line":46,"column":12},"end":{"line":46,"column":83}},"38":{"start":{"line":49,"column":12},"end":{"line":49,"column":78}},"39":{"start":{"line":53,"column":0},"end":{"line":53,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":19},"end":{"line":18,"column":20}},"loc":{"start":{"line":18,"column":39},"end":{"line":52,"column":1}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":43},"end":{"line":19,"column":44}},"loc":{"start":{"line":19,"column":56},"end":{"line":51,"column":5}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":46},"end":{"line":26,"column":47}},"loc":{"start":{"line":26,"column":56},"end":{"line":26,"column":127}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":28,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":40,"column":13}},{"start":{"line":28,"column":12},"end":{"line":40,"column":13}}],"line":28}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/likes/controllers/likeController.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/likes/controllers/likeController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,uFAAyD;AAEzD,uFAAyD;AAElD,MAAM,UAAU,GAAG,UAAgB,GAAY,EAAE,GAAa;;QACnE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,MAAM,IAAI,GAAG,MAAM,oBAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,QAAQ,CAAC;gBACjD,IAAI,EAAE,OAAO;gBACb,QAAQ,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;aAC5B,CAAC,CAAC;YAEH,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAC/B,CAAC,IAAS,EAAE,EAAE,CACZ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAC1E,CAAC;YAEF,IAAI,UAAU,CAAC;YAEf,IAAI,SAAS,EAAE,CAAC;gBACd,UAAU,GAAG,MAAM,oBAAI,CAAC,iBAAiB,CACvC,IAAI,CAAC,EAAE,EACP,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE,EAAE,EAAE,EAClC,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,CACnC,CAAC;gBACF,MAAM,WAAW,GAAG,MAAM,oBAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACjE,CAAC;iBAAM,CAAC;gBACN,MAAM,IAAI,GAAQ,IAAI,oBAAI,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC7C,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBACxC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACjB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACtB,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;gBAClB,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;gBAClB,UAAU,GAAG,IAAI,CAAC;YACpB,CAAC;YAED,MAAM,QAAQ,GAAG,MAAM,oBAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;iBAChD,QAAQ,CAAC,QAAQ,CAAC;iBAClB,QAAQ,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC;iBAC5D,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;YAE5D,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAEtB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;QACzE,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;CAAA,CAAC;AA3CW,QAAA,UAAU,cA2CrB","sourcesContent":["import { Request, Response } from \"express\";\r\nimport Blog from \"./../../../database/models/blogsModel\";\r\nimport User from \"./../../../database/models/usersModel\";\r\nimport Like from \"./../../../database/models/likesModel\";\r\n\r\nexport const createLike = async function (req: Request, res: Response) {\r\n  try {\r\n    const { slug } = req.params;\r\n    const blog = await Blog.findOne({ slug }).populate({\r\n      path: \"likes\",\r\n      populate: { path: \"owner\" },\r\n    });\r\n\r\n    const foundLike = blog.likes.find(\r\n      (like: any) =>\r\n        like.owner._id.toString() === req.body.authenticatedUser._id.toString()\r\n    );\r\n\r\n    let actualBlog;\r\n\r\n    if (foundLike) {\r\n      actualBlog = await Blog.findByIdAndUpdate(\r\n        blog.id,\r\n        { $pull: { likes: foundLike.id } },\r\n        { new: true, runValidators: true }\r\n      );\r\n      const deletedLike = await Like.findByIdAndDelete(foundLike.id);\r\n    } else {\r\n      const like: any = new Like({ likeCount: 1 });\r\n      like.owner = req.body.authenticatedUser;\r\n      like.blog = blog;\r\n      blog.likes.push(like);\r\n      await like.save();\r\n      await blog.save();\r\n      actualBlog = blog;\r\n    }\r\n\r\n    const realBlog = await Blog.findById(actualBlog.id)\r\n      .populate(\"author\")\r\n      .populate({ path: \"comments\", populate: { path: \"author\" } })\r\n      .populate({ path: \"likes\", populate: { path: \"owner\" } });\r\n\r\n    console.log(realBlog);\r\n\r\n    res.status(201).json({ ok: true, message: \"success\", data: realBlog });\r\n  } catch (err) {\r\n    res.status(500).json({ ok: false, message: \"fail\", errors: err });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"582304843b4052e7a8c5e2255d64089f92edc9b9"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\comments\\tests\\comment.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\comments\\tests\\comment.spec.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/comments/tests/comment.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/comments/tests/comment.spec.ts"],"names":[],"mappings":"","sourcesContent":[""]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8c94b7c03d16ef49f531c9da80fa83eba73566c5"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\contacts\\tests\\contact.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\contacts\\tests\\contact.spec.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/contacts/tests/contact.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/contacts/tests/contact.spec.ts"],"names":[],"mappings":"","sourcesContent":[""]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4f4b55d5512918ac2e554a03f059ad53b3977a6e"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\likes\\tests\\like.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\likes\\tests\\like.spec.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/likes/tests/like.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/likes/tests/like.spec.ts"],"names":[],"mappings":"","sourcesContent":[""]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3e584333eb4d5baf351637755756e930ae84662a"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\subscribers\\tests\\subscriber.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\subscribers\\tests\\subscriber.spec.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/subscribers/tests/subscriber.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/subscribers/tests/subscriber.spec.ts"],"names":[],"mappings":"","sourcesContent":[""]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b77305a993dab44cd46b40caf857e24982c0556f"},"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\users\\tests\\user.spec.ts":{"path":"C:\\Program Files\\STUFF\\Projects\\my-brand-backend-final\\src\\modules\\users\\tests\\user.spec.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/users/tests/user.spec.ts","sources":["C:/Program Files/STUFF/Projects/my-brand-backend-final/src/modules/users/tests/user.spec.ts"],"names":[],"mappings":"","sourcesContent":[""]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e28bb59949f7a48513163bcceb432d584a1864f5"}}